{"version":3,"sources":["meta/compile/private/Token.js"],"names":[],"mappings":"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","file":"meta/compile/private/Token.js","sourcesContent":["import Loc from 'esast/dist/Loc'\nimport { code } from '../CompileError'\nimport { AllKeywords, CaseKeywords, GroupKinds, GroupOpenToClose, LineSplitKeywords } from './Lang'\nimport type from './U/type'\nimport { tuple } from './U/types'\nimport { implementMany2 } from './U/util'\n\nexport default class Token { }\n\nconst tt = function() { return tuple(Token, 'loc', Loc, ...arguments) }\n\nconst gIs = k => {\n\ttype(k, GroupKinds)\n\treturn t => t instanceof Group && t.k === k\n}\nconst kwIs = k => {\n\tif (k instanceof Set)\n\t\treturn t => t instanceof Keyword && k.has(t.k)\n\telse {\n\t\ttype(k, AllKeywords)\n\t\treturn t => t instanceof Keyword && t.k === k\n\t}\n}\n\nexport const\n\tName = tt('name', String),\n\tGroup = Object.assign(\n\t\ttt('tokens', [Token], 'k', GroupKinds),\n\t\t{\n\t\t\tisBlock: gIs('->'),\n\t\t\tisLine: gIs('ln'),\n\t\t\tisSpaced: gIs('sp')\n\t\t}),\n\tKeyword = Object.assign(\n\t\ttt('k', AllKeywords),\n\t\t{\n\t\t\tis: kwIs,\n\t\t\tisBar: kwIs('|'),\n\t\t\tisCaseOrCaseDo: kwIs(CaseKeywords),\n\t\t\tisColon: kwIs(':'),\n\t\t\tisFocus: kwIs('_'),\n\t\t\tisElse: kwIs('else'),\n\t\t\tisLineSplit: kwIs(LineSplitKeywords),\n\t\t\tisTilde: kwIs('~'),\n\t\t\tisObjAssign: kwIs('. ')\n\t\t}),\n\t// k: Number | String | 'js'\n\tLiteral = tt('value', String, 'k', Object),\n\tCallOnFocus = tt('name', String),\n\tDotName = tt('nDots', Number, 'name', String)\n\n// toString is used by some parsing errors. Use U.inspect for a more detailed view.\nconst show = implementMany2('show', [\n\t[CallOnFocus, () => '_'],\n\t[DotName, _ => '.'.repeat(_.nDots) + _.name],\n\t[Group, _ => `${_.k}...${GroupOpenToClose.get(_.k)}`],\n\t[Keyword, _ => { return _.k } ],\n\t[Literal, _ => _.value],\n\t[Name, _ => _.name]\n])\nObject.assign(Token.prototype, {\n\ttoString() { return code(show(this)) }\n})\n"],"sourceRoot":"/src"}