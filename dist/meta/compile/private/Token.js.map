{"version":3,"sources":["meta/compile/private/Token.js"],"names":[],"mappings":"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","file":"meta/compile/private/Token.js","sourcesContent":["import Loc from 'esast/dist/Loc'\nimport tuple from 'esast/dist/private/tuple'\nimport { code } from '../CompileError'\nimport { AllKeywords, CaseKeywords, GroupKinds, GroupOpenToClose, LineSplitKeywords } from './Lang'\nimport type from './U/type'\nimport { implementMany2 } from './U/util'\n\nexport default class Token { }\n\nconst tt = (name, ...namesTypes) => tuple(name, Token, 'doc', [ 'loc', Loc ].concat(namesTypes))\n\nconst gIs = k => {\n\ttype(k, GroupKinds)\n\treturn t => t instanceof Group && t.k === k\n}\nconst kwIs = k => {\n\tif (k instanceof Set)\n\t\treturn t => t instanceof Keyword && k.has(t.k)\n\telse {\n\t\ttype(k, AllKeywords)\n\t\treturn t => t instanceof Keyword && t.k === k\n\t}\n}\n\nexport const\n\tG_Paren = 1,\n\tG_Bracket = 2,\n\tG_Block = 3,\n\tG_Quote = 4,\n\tG_Line = 5,\n\tG_Space = 6\n\nexport const\n\tName = tt('Name', 'name', String),\n\tGroup = Object.assign(\n\t\ttt('Group', 'tokens', [Token], 'k', Number),\n\t\t{\n\t\t\tisBlock: gIs(G_Block),\n\t\t\tisLine: gIs(G_Line),\n\t\t\tisSpaced: gIs(G_Space)\n\t\t}),\n\tKeyword = Object.assign(\n\t\ttt('Keyword', 'k', AllKeywords),\n\t\t{\n\t\t\tis: kwIs,\n\t\t\tisBar: kwIs('|'),\n\t\t\tisCaseOrCaseDo: kwIs(CaseKeywords),\n\t\t\tisColon: kwIs(':'),\n\t\t\tisFocus: kwIs('_'),\n\t\t\tisElse: kwIs('else'),\n\t\t\tisLineSplit: kwIs(LineSplitKeywords),\n\t\t\tisTilde: kwIs('~'),\n\t\t\tisObjAssign: kwIs('. ')\n\t\t}),\n\t// k: Number | String | 'js'\n\tLiteral = tt('Literal', 'value', String, 'k', Object),\n\tCallOnFocus = tt('CallOnFocus', 'name', String),\n\tDotName = tt('DotName', 'nDots', Number, 'name', String)\n\n// toString is used by some parsing errors. Use U.inspect for a more detailed view.\nconst show = implementMany2('show', [\n\t[CallOnFocus, () => '_'],\n\t[DotName, _ => '.'.repeat(_.nDots) + _.name],\n\t[Group, _ => `${_.k}...${GroupOpenToClose.get(_.k)}`],\n\t[Keyword, _ => { return _.k } ],\n\t[Literal, _ => _.value],\n\t[Name, _ => _.name]\n])\nObject.assign(Token.prototype, {\n\ttoString() { return code(show(this)) }\n})\n"],"sourceRoot":"/src"}