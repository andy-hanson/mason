if (typeof define !== 'function') var define = require('amdefine')(module);define(['exports', 'esast/dist/Loc', 'tupl/dist/tupl', '../CompileError', '../Expression', './util'], function (exports, _esastDistLoc, _tuplDistTupl, _CompileError, _Expression, _util) {
	'use strict';

	Object.defineProperty(exports, '__esModule', {
		value: true
	});

	function _interopRequire(obj) { return obj && obj.__esModule ? obj['default'] : obj; }

	var _Loc = _interopRequire(_esastDistLoc);

	var _tupl = _interopRequire(_tuplDistTupl);

	const Token = (0, _tuplDistTupl.abstract)('Token', Object, 'TODO:doc', {
		toString: function () {
			return (0, _CompileError.code)(this.show());
		}
	});
	exports.default = Token;

	const tt = function (name, namesTypes, props) {
		return (0, _tupl)(name, Token, 'doc', ['loc', _Loc].concat(namesTypes), {}, props);
	};

	// Don't use `0` because we want to use negative nmbers to represent GroupPre closers.
	const G_Paren = 1,
	      G_Bracket = 2,
	      G_Block = 3,
	      G_Quote = 4,
	      G_Line = 5,
	      G_Space = 6;

	exports.G_Paren = G_Paren;
	exports.G_Bracket = G_Bracket;
	exports.G_Block = G_Block;
	exports.G_Quote = G_Quote;
	exports.G_Line = G_Line;
	exports.G_Space = G_Space;
	let nextId = 0;
	const nameToK = new Map();
	const kToName = new Map();
	const kw = function (name) {
		const k = kwNotName(name);
		nameToK.set(name, k);
		return k;
	};
	const kwNotName = function (debugName) {
		const k = nextId;
		kToName.set(k, debugName);
		nextId = nextId + 1;
		return k;
	};

	const KW_Assign = kw('='),
	      KW_AssignMutable = kw('::='),
	      KW_AssignMutate = kw(':='),
	      KW_Case = kw('case'),
	      KW_CaseDo = kw('case!'),
	      KW_Debug = kw('debug'),
	      KW_Debugger = kw('debugger'),
	      KW_Else = kw('else'),
	      KW_EndLoop = kw('end-loop!'),
	      KW_False = kw('false'),
	      KW_Focus = kwNotName('_'),
	      KW_Fun = kw('|'),
	      KW_GenFun = kw('~|'),
	      KW_IfDo = kw('if!'),
	      KW_In = kw('in'),
	      KW_Lazy = kwNotName('~'),
	      KW_Loop = kw('loop!'),
	      KW_MapEntry = kw('->'),
	      KW_Null = kw('null'),
	      KW_ObjAssign = kw('. '),
	      KW_Out = kw('out'),
	      KW_Pass = kw('pass'),
	      KW_Region = kw('region'),
	      KW_This = kw('this'),
	      KW_ThisModuleDirectory = kw('this-module-directory'),
	      KW_True = kw('true'),
	      KW_Type = kwNotName(':'),
	      KW_Undefined = kw('undefined'),
	      KW_Use = kw('use'),
	      KW_UseDebug = kw('use-debug'),
	      KW_UseDo = kw('use!'),
	      KW_UseLazy = kw('use~'),
	      KW_Yield = kw('<~'),
	      KW_YieldTo = kw('<~~');

	exports.KW_Assign = KW_Assign;
	exports.KW_AssignMutable = KW_AssignMutable;
	exports.KW_AssignMutate = KW_AssignMutate;
	exports.KW_Case = KW_Case;
	exports.KW_CaseDo = KW_CaseDo;
	exports.KW_Debug = KW_Debug;
	exports.KW_Debugger = KW_Debugger;
	exports.KW_Else = KW_Else;
	exports.KW_EndLoop = KW_EndLoop;
	exports.KW_False = KW_False;
	exports.KW_Focus = KW_Focus;
	exports.KW_Fun = KW_Fun;
	exports.KW_GenFun = KW_GenFun;
	exports.KW_IfDo = KW_IfDo;
	exports.KW_In = KW_In;
	exports.KW_Lazy = KW_Lazy;
	exports.KW_Loop = KW_Loop;
	exports.KW_MapEntry = KW_MapEntry;
	exports.KW_Null = KW_Null;
	exports.KW_ObjAssign = KW_ObjAssign;
	exports.KW_Out = KW_Out;
	exports.KW_Pass = KW_Pass;
	exports.KW_Region = KW_Region;
	exports.KW_This = KW_This;
	exports.KW_ThisModuleDirectory = KW_ThisModuleDirectory;
	exports.KW_True = KW_True;
	exports.KW_Type = KW_Type;
	exports.KW_Undefined = KW_Undefined;
	exports.KW_Use = KW_Use;
	exports.KW_UseDebug = KW_UseDebug;
	exports.KW_UseDo = KW_UseDo;
	exports.KW_UseLazy = KW_UseLazy;
	exports.KW_Yield = KW_Yield;
	exports.KW_YieldTo = KW_YieldTo;
	const keywordKFromName = function (name) {
		return nameToK.get(name);
	},
	      opKWtoSV = function (kw) {
		switch (kw) {
			case KW_False:
				return _Expression.SV_False;
			case KW_Null:
				return _Expression.SV_Null;
			case KW_This:
				return _Expression.SV_This;
			case KW_ThisModuleDirectory:
				return _Expression.SV_ThisModuleDirectory;
			case KW_True:
				return _Expression.SV_True;
			case KW_Undefined:
				return _Expression.SV_Undefined;
			default:
				return null;
		}
	};

	exports.keywordKFromName = keywordKFromName;
	exports.opKWtoSV = opKWtoSV;
	const CallOnFocus = tt('CallOnFocus', ['name', String]),
	      DotName = tt('DotName', ['nDots', Number, 'name', String]),
	      Group = tt('Group', ['tokens', [Token], 'kind', Number]),
	      Keyword = tt('Keyword', ['kind', Number]),
	      Name = tt('Name', ['name', String]),
	      TokenNumberLiteral = tt('TokenNumberLiteral', ['value', Number]);

	exports.CallOnFocus = CallOnFocus;
	exports.DotName = DotName;
	exports.Group = Group;
	exports.Keyword = Keyword;
	exports.Name = Name;
	exports.TokenNumberLiteral = TokenNumberLiteral;
	const isGroup = function (groupKind, token) {
		return token instanceof Group && token.kind === groupKind;
	},
	      isKeyword = function (keywordKind, token) {
		return token instanceof Keyword && token.kind === keywordKind;
	};

	exports.isGroup = isGroup;
	exports.isKeyword = isKeyword;
	// toString is used by some parsing errors. Use U.inspect for a more detailed view.
	(0, _util.implementMany)({ CallOnFocus: CallOnFocus, DotName: DotName, Group: Group, Keyword: Keyword, Name: Name, TokenNumberLiteral: TokenNumberLiteral }, 'show', {
		CallOnFocus: function () {
			return '' + this.name + '_';
		},
		DotName: function () {
			return '' + '.'.repeat(this.nDots) + '' + this.name;
		},
		// TODO: better representation of k
		Group: function () {
			return 'group(k=' + this.kind + ')';
		},
		// TODO: better representation of k
		Keyword: function () {
			return 'keyword(k=' + kToName.get(this.kind) + ')';
		},
		Name: function () {
			return this.name;
		},
		TokenNumberLiteral: function () {
			return this.value;
		}
	});
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ldGEvY29tcGlsZS9wcml2YXRlL1Rva2VuLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFPQSxPQUFNLEtBQUssR0FBRyxrQkFOQyxRQUFRLEVBTUEsT0FBTyxFQUFFLE1BQU0sRUFDckMsVUFBVSxFQUNWO0FBQ0MsVUFBUSxFQUFBLFlBQUc7QUFBRSxVQUFPLGtCQVJiLElBQUksRUFRYyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQTtHQUFFO0VBQ3ZDLENBQUMsQ0FBQTttQkFDWSxLQUFLOztBQUVwQixPQUFNLEVBQUUsR0FBRyxVQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSztTQUNsQyxXQUFLLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUUsS0FBSyxPQUFPLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFLEVBQUcsRUFBRSxLQUFLLENBQUM7RUFBQSxDQUFBOzs7QUFHakUsT0FDTixPQUFPLEdBQUcsQ0FBQztPQUNYLFNBQVMsR0FBRyxDQUFDO09BQ2IsT0FBTyxHQUFHLENBQUM7T0FDWCxPQUFPLEdBQUcsQ0FBQztPQUNYLE1BQU0sR0FBRyxDQUFDO09BQ1YsT0FBTyxHQUFHLENBQUMsQ0FBQTs7U0FMWCxPQUFPLEdBQVAsT0FBTztTQUNQLFNBQVMsR0FBVCxTQUFTO1NBQ1QsT0FBTyxHQUFQLE9BQU87U0FDUCxPQUFPLEdBQVAsT0FBTztTQUNQLE1BQU0sR0FBTixNQUFNO1NBQ04sT0FBTyxHQUFQLE9BQU87QUFFUixLQUFJLE1BQU0sR0FBRyxDQUFDLENBQUE7QUFDZCxPQUFNLE9BQU8sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFBO0FBQ3pCLE9BQU0sT0FBTyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUE7QUFDekIsT0FBTSxFQUFFLEdBQUcsVUFBQSxJQUFJLEVBQUk7QUFDbEIsUUFBTSxDQUFDLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFBO0FBQ3pCLFNBQU8sQ0FBQyxH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QUFJLEVBQUosSUFBSSxFQUFFLGtCQUFrQixFQUFsQixrQkFBa0IsRUFBRSxFQUFFLE1BQU0sRUFBRTtBQUN6RixhQUFXLEVBQUEsWUFBRztBQUFFLGVBQVUsSUFBSSxDQUFDLElBQUksT0FBRztHQUFFO0FBQ3hDLFNBQU8sRUFBQSxZQUFHO0FBQUUsZUFBVSxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBRyxJQUFJLENBQUMsSUFBSSxDQUFFO0dBQUU7O0FBRTVELE9BQUssRUFBQSxZQUFHO0FBQUUsdUJBQWtCLElBQUksQ0FBQyxJQUFJLE9BQUc7R0FBRTs7QUFFMUMsU0FBTyxFQUFBLFlBQUc7QUFBRSx5QkFBb0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQUc7R0FBRTtBQUMzRCxNQUFJLEVBQUEsWUFBRztBQUFFLFVBQU8sSUFBSSxDQUFDLElBQUksQ0FBQTtHQUFFO0FBQzNCLG9CQUFrQixFQUFBLFlBQUc7QUFBRSxVQUFPLElBQUksQ0FBQyxLQUFLLENBQUE7R0FBRTtFQUMxQyxDQUFDLENBQUEiLCJmaWxlIjoibWV0YS9jb21waWxlL3ByaXZhdGUvVG9rZW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9jIGZyb20gJ2VzYXN0L2Rpc3QvTG9jJ1xuaW1wb3J0IHR1cGwsIHsgYWJzdHJhY3QgfSBmcm9tICd0dXBsL2Rpc3QvdHVwbCdcbmltcG9ydCB7IGNvZGUgfSBmcm9tICcuLi9Db21waWxlRXJyb3InXG5pbXBvcnQgeyBTVl9GYWxzZSwgU1ZfTnVsbCwgU1ZfVGhpcywgU1ZfVGhpc01vZHVsZURpcmVjdG9yeSwgU1ZfVHJ1ZSwgU1ZfVW5kZWZpbmVkXG5cdH0gZnJvbSAnLi4vRXhwcmVzc2lvbidcbmltcG9ydCB7IGltcGxlbWVudE1hbnkgfSBmcm9tICcuL3V0aWwnXG5cbmNvbnN0IFRva2VuID0gYWJzdHJhY3QoJ1Rva2VuJywgT2JqZWN0LFxuXHQnVE9ETzpkb2MnLFxuXHR7XG5cdFx0dG9TdHJpbmcoKSB7IHJldHVybiBjb2RlKHRoaXMuc2hvdygpKSB9XG5cdH0pXG5leHBvcnQgZGVmYXVsdCBUb2tlblxuXG5jb25zdCB0dCA9IChuYW1lLCBuYW1lc1R5cGVzLCBwcm9wcykgPT5cblx0dHVwbChuYW1lLCBUb2tlbiwgJ2RvYycsIFsgJ2xvYycsIExvYyBdLmNvbmNhdChuYW1lc1R5cGVzKSwgeyB9LCBwcm9wcylcblxuLy8gRG9uJ3QgdXNlIGAwYCBiZWNhdXNlIHdlIHdhbnQgdG8gdXNlIG5lZ2F0aXZlIG5tYmVycyB0byByZXByZXNlbnQgR3JvdXBQcmUgY2xvc2Vycy5cbmV4cG9ydCBjb25zdFxuXHRHX1BhcmVuID0gMSxcblx0R19CcmFja2V0ID0gMixcblx0R19CbG9jayA9IDMsXG5cdEdfUXVvdGUgPSA0LFxuXHRHX0xpbmUgPSA1LFxuXHRHX1NwYWNlID0gNlxuXG5sZXQgbmV4dElkID0gMFxuY29uc3QgbmFtZVRvSyA9IG5ldyBNYXAoKVxuY29uc3Qga1RvTmFtZSA9IG5ldyBNYXAoKVxuY29uc3Qga3cgPSBuYW1lID0+IHtcblx0Y29uc3QgayA9IGt3Tm90TmFtZShuYW1lKVxuXHRuYW1lVG9LLnNldChuYW1lLCBrKVxuXHRyZXR1cm4ga1xufVxuY29uc3Qga3dOb3ROYW1lID0gZGVidWdOYW1lID0+IHtcblx0Y29uc3QgayA9IG5leHRJZFxuXHRrVG9OYW1lLnNldChrLCBkZWJ1Z05hbWUpXG5cdG5leHRJZCA9IG5leHRJZCArIDFcblx0cmV0dXJuIGtcbn1cblxuZXhwb3J0IGNvbnN0XG5cdEtXX0Fzc2lnbiA9IGt3KCc9JyksXG5cdEtXX0Fzc2lnbk11dGFibGUgPSBrdygnOjo9JyksXG5cdEtXX0Fzc2lnbk11dGF0ZSA9IGt3KCc6PScpLFxuXHRLV19DYXNlID0ga3coJ2Nhc2UnKSxcblx0S1dfQ2FzZURvID0ga3coJ2Nhc2UhJyksXG5cdEtXX0RlYnVnID0ga3coJ2RlYnVnJyksXG5cdEtXX0RlYnVnZ2VyID0ga3coJ2RlYnVnZ2VyJyksXG5cdEtXX0Vsc2UgPSBrdygnZWxzZScpLFxuXHRLV19FbmRMb29wID0ga3coJ2VuZC1sb29wIScpLFxuXHRLV19GYWxzZSA9IGt3KCdmYWxzZScpLFxuXHRLV19Gb2N1cyA9IGt3Tm90TmFtZSgnXycpLFxuXHRLV19GdW4gPSBrdygnfCcpLFxuXHRLV19HZW5GdW4gPSBrdygnfnwnKSxcblx0S1dfSWZEbyA9IGt3KCdpZiEnKSxcblx0S1dfSW4gPSBrdygnaW4nKSxcblx0S1dfTGF6eSA9IGt3Tm90TmFtZSgnficpLFxuXHRLV19Mb29wID0ga3coJ2xvb3AhJyksXG5cdEtXX01hcEVudHJ5ID0ga3coJy0+JyksXG5cdEtXX051bGwgPSBrdygnbnVsbCcpLFxuXHRLV19PYmpBc3NpZ24gPSBrdygnLiAnKSxcblx0S1dfT3V0ID0ga3coJ291dCcpLFxuXHRLV19QYXNzID0ga3coJ3Bhc3MnKSxcblx0S1dfUmVnaW9uID0ga3coJ3JlZ2lvbicpLFxuXHRLV19UaGlzID0ga3coJ3RoaXMnKSxcblx0S1dfVGhpc01vZHVsZURpcmVjdG9yeSA9IGt3KCd0aGlzLW1vZHVsZS1kaXJlY3RvcnknKSxcblx0S1dfVHJ1ZSA9IGt3KCd0cnVlJyksXG5cdEtXX1R5cGUgPSBrd05vdE5hbWUoJzonKSxcblx0S1dfVW5kZWZpbmVkID0ga3coJ3VuZGVmaW5lZCcpLFxuXHRLV19Vc2UgPSBrdygndXNlJyksXG5cdEtXX1VzZURlYnVnID0ga3coJ3VzZS1kZWJ1ZycpLFxuXHRLV19Vc2VEbyA9IGt3KCd1c2UhJyksXG5cdEtXX1VzZUxhenkgPSBrdygndXNlficpLFxuXHRLV19ZaWVsZCA9IGt3KCc8ficpLFxuXHRLV19ZaWVsZFRvID0ga3coJzx+ficpXG5cbmV4cG9ydCBjb25zdFxuXHRrZXl3b3JkS0Zyb21OYW1lID0gbmFtZSA9PiBuYW1lVG9LLmdldChuYW1lKSxcblx0b3BLV3RvU1YgPSBrdyA9PiB7XG5cdFx0c3dpdGNoIChrdykge1xuXHRcdFx0Y2FzZSBLV19GYWxzZTogcmV0dXJuIFNWX0ZhbHNlXG5cdFx0XHRjYXNlIEtXX051bGw6IHJldHVybiBTVl9OdWxsXG5cdFx0XHRjYXNlIEtXX1RoaXM6IHJldHVybiBTVl9UaGlzXG5cdFx0XHRjYXNlIEtXX1RoaXNNb2R1bGVEaXJlY3Rvcnk6IHJldHVybiBTVl9UaGlzTW9kdWxlRGlyZWN0b3J5XG5cdFx0XHRjYXNlIEtXX1RydWU6IHJldHVybiBTVl9UcnVlXG5cdFx0XHRjYXNlIEtXX1VuZGVmaW5lZDogcmV0dXJuIFNWX1VuZGVmaW5lZFxuXHRcdFx0ZGVmYXVsdDogcmV0dXJuIG51bGxcblx0XHR9XG5cdH1cblxuZXhwb3J0IGNvbnN0XG5cdENhbGxPbkZvY3VzID0gdHQoJ0NhbGxPbkZvY3VzJywgWyAnbmFtZScsIFN0cmluZyBdKSxcblx0RG90TmFtZSA9IHR0KCdEb3ROYW1lJywgWyAnbkRvdHMnLCBOdW1iZXIsICduYW1lJywgU3RyaW5nIF0pLFxuXHRHcm91cCA9IHR0KCdHcm91cCcsXG5cdFx0WyAndG9rZW5zJywgW1Rva2VuXSwgJ2tpbmQnLCBOdW1iZXIgXSksXG5cdEtleXdvcmQgPSB0dCgnS2V5d29yZCcsIFsgJ2tpbmQnLCBOdW1iZXIgXSksXG5cdE5hbWUgPSB0dCgnTmFtZScsIFsgJ25hbWUnLCBTdHJpbmcgXSksXG5cdFRva2VuTnVtYmVyTGl0ZXJhbCA9IHR0KCdUb2tlbk51bWJlckxpdGVyYWwnLCBbICd2YWx1ZScsIE51bWJlciBdKVxuXG5leHBvcnQgY29uc3Rcblx0aXNHcm91cCA9IChncm91cEtpbmQsIHRva2VuKSA9PlxuXHRcdHRva2VuIGluc3RhbmNlb2YgR3JvdXAgJiYgdG9rZW4ua2luZCA9PT0gZ3JvdXBLaW5kLFxuXHRpc0tleXdvcmQgPSAoa2V5d29yZEtpbmQsIHRva2VuKSA9PlxuXHRcdHRva2VuIGluc3RhbmNlb2YgS2V5d29yZCAmJiB0b2tlbi5raW5kID09PSBrZXl3b3JkS2luZFxuXG4vLyB0b1N0cmluZyBpcyB1c2VkIGJ5IHNvbWUgcGFyc2luZyBlcnJvcnMuIFVzZSBVLmluc3BlY3QgZm9yIGEgbW9yZSBkZXRhaWxlZCB2aWV3LlxuaW1wbGVtZW50TWFueSh7IENhbGxPbkZvY3VzLCBEb3ROYW1lLCBHcm91cCwgS2V5d29yZCwgTmFtZSwgVG9rZW5OdW1iZXJMaXRlcmFsIH0sICdzaG93Jywge1xuXHRDYWxsT25Gb2N1cygpIHsgcmV0dXJuIGAke3RoaXMubmFtZX1fYCB9LFxuXHREb3ROYW1lKCkgeyByZXR1cm4gYCR7Jy4nLnJlcGVhdCh0aGlzLm5Eb3RzKX0ke3RoaXMubmFtZX1gIH0sXG5cdC8vIFRPRE86IGJldHRlciByZXByZXNlbnRhdGlvbiBvZiBrXG5cdEdyb3VwKCkgeyByZXR1cm4gYGdyb3VwKGs9JHt0aGlzLmtpbmR9KWAgfSxcblx0Ly8gVE9ETzogYmV0dGVyIHJlcHJlc2VudGF0aW9uIG9mIGtcblx0S2V5d29yZCgpIHsgcmV0dXJuIGBrZXl3b3JkKGs9JHtrVG9OYW1lLmdldCh0aGlzLmtpbmQpfSlgIH0sXG5cdE5hbWUoKSB7IHJldHVybiB0aGlzLm5hbWUgfSxcblx0VG9rZW5OdW1iZXJMaXRlcmFsKCkgeyByZXR1cm4gdGhpcy52YWx1ZSB9XG59KVxuIl0sInNvdXJjZVJvb3QiOiIvc3JjIn0=