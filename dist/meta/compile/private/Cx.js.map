{"version":3,"sources":["meta/compile/private/Cx.js"],"names":[],"mappings":";;;;;;;;;;;;;KAAO,YAAY;;KAAI,OAAO,iBAAP,OAAO;;KACvB,GAAG;;KAAI,GAAG,iBAAH,GAAG;KAAE,aAAa,iBAAb,aAAa;;KACzB,IAAI;;KAEU,EAAE,GACX,SADS,EAAE,CACV,IAAI,EAAE;wBADE,EAAE;;AAErB,MAAI,CAAC,IAAI,GAAG,IAAI,CAAA;AAChB,MAAI,CAAC,QAAQ,GAAG,EAAE,CAAA;EAClB;;mBAJmB,EAAE;;;;KAQV,UAAU,WAAV,UAAU;AACX,WADC,UAAU,CACV,EAAE,EAAE;yBADJ,UAAU;;AAErB,OAAI,CAAC,EAAE,GAAG,EAAE,CAAA;GACZ;;eAHW,UAAU;AAKtB,QAAK;WAAA,eAAC,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE;AACzB,SAAI,CAAC,IAAI,EACR,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,CAAA;KACxB;;AAED,OAAI;WAAA,cAAC,GAAG,EAAE,OAAO,EAAE;AAClB,WAAM,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC,CAAA;KACzC;;AAED,SAAM;WAAA,gBAAC,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE;AAC1B,SAAI,IAAI,EACP,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC,CAAA;KAC7C;;AAED,OAAI;WAAA,gBAAG;AAAE,YAAO,IAAI,CAAC,EAAE,CAAC,IAAI,CAAA;KAAE;;;;SAnBlB,UAAU;;;AAsBvB,OAAM,MAAM,GAAG,UAAA,CAAC;SAAI,CAAC,YAAY,QAAQ,GAAG,CAAC,EAAE,GAAG,CAAC;EAAA,CAAA;;AAEnD,OAAM,OAAO,GAAG,UAAC,GAAG,EAAE,OAAO,EAAK;AACjC,KAAG,GAAG,MAAM,CAAC,GAAG,CAAC,CAAA;AACjB,SAAO,GAAG,MAAM,CAAC,OAAO,CAAC,CAAA;AACzB,MAAI,GAAG,YAAY,GAAG,EACrB,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC,CAAA;AACzB,MAAI,CAAC,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,CAAC,CAAA;AAC/B,SAAO,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAA;EAC5B,CAAA","file":"meta/compile/private/Cx.js","sourcesContent":["import CompileError, { Warning } from '../CompileError'\nimport Loc, { Pos, singleCharLoc } from 'esast/dist/Loc'\nimport type from './U/type'\n\nexport default class Cx {\n\tconstructor(opts) {\n\t\tthis.opts = opts\n\t\tthis.warnings = []\n\t}\n}\n\n// Intended to be inherited by specific contexts.\nexport class SubContext {\n\tconstructor(cx) {\n\t\tthis.cx = cx\n\t}\n\n\tcheck(cond, loc, message) {\n\t\tif (!cond)\n\t\t\tthis.fail(loc, message)\n\t}\n\n\tfail(loc, message) {\n\t\tthrow CompileError(warning(loc, message))\n\t}\n\n\twarnIf(cond, loc, message) {\n\t\tif (cond)\n\t\t\tthis.cx.warnings.push(warning(loc, message))\n\t}\n\n\topts() { return this.cx.opts }\n}\n\nconst unlazy = _ => _ instanceof Function ? _() : _\n\nconst warning = (loc, message) => {\n\tloc = unlazy(loc)\n\tmessage = unlazy(message)\n\tif (loc instanceof Pos)\n\t\tloc = singleCharLoc(loc)\n\ttype(loc, Loc, message, String)\n\treturn Warning(loc, message)\n}\n"],"sourceRoot":"/src"}