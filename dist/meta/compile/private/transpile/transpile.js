if (typeof define !== 'function') var define = require('amdefine')(module);define(['exports', 'esast/dist/ast', 'esast/dist/util', 'esast/dist/specialize', '../../Expression', '../U/Bag', '../U/op', '../U/util', './esast-util', './transpileModule', './util'], function (exports, _esastDistAst, _esastDistUtil, _esastDistSpecialize, _Expression, _UBag, _UOp, _UUtil, _esastUtil, _transpileModule, _util) {
	'use strict';

	Object.defineProperty(exports, '__esModule', {
		value: true
	});
	exports.default = transpile;

	function _interopRequire(obj) { return obj && obj.__esModule ? obj['default'] : obj; }

	function _slicedToArray(arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }

	function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }

	var _transpileModule2 = _interopRequire(_transpileModule);

	const ExtractVar = _esastDistAst.Identifier('_$');

	let cx, vr, isInGenerator;

	function transpile(_cx, e, _vr) {
		cx = _cx;
		vr = _vr;
		isInGenerator = false;
		const res = t0(e);
		// Release for garbage collection
		cx = vr = undefined;
		return res;
	}

	const t0 = function (expr) {
		const ast = expr.transpileSubtree();
		ast.loc = expr.loc;
		return ast;
	};
	exports.t0 = t0;
	const t1 = function (expr, arg) {
		const ast = expr.transpileSubtree(arg);
		ast.loc = expr.loc;
		return ast;
	};
	const t3 = function (expr, arg, arg2, arg3) {
		const ast = expr.transpileSubtree(arg, arg2, arg3);
		ast.loc = expr.loc;
		return ast;
	};
	const tm = function (expr) {
		const ast = expr.transpileSubtree();
		if (!(ast instanceof Array))
			// Debug may produce multiple statements.
			ast.loc = expr.loc;
		return ast;
	};

	exports.tm = tm;
	function transpileBlock(lead, opResDeclare, opOut) {
		var _this = this;

		if (lead === undefined) lead = [];
		if (opResDeclare === undefined) opResDeclare = opOut = null;
		const body = _UBag.flatMap(this.lines, function (line) {
			return _util.toStatements(tm(line));
		});
		const isVal = this instanceof _Expression.BlockVal;
		const fin = _UOp.ifElse(opResDeclare, function (rd) {
			_UUtil.assert(isVal);
			const returned = _util.maybeWrapInCheckContains(cx, t0(_this.returned), rd.opType, 'res');
			return _UOp.ifElse(opOut, function (_) {
				return _UBag.cat(_esastUtil.declare(rd, returned), _, _util.ReturnRes);
			}, function () {
				return _esastDistAst.ReturnStatement(returned);
			});
		}, function () {
			return _UBag.cat(opOut, _UOp.opIf(isVal, function () {
				return _esastDistAst.ReturnStatement(t0(_this.returned));
			}));
		});
		return _esastDistAst.BlockStatement(_UBag.cat(lead, body, fin));
	}

	function casePart(alternate) {
		if (this.test instanceof _Expression.Pattern) {
			const decl = _esastDistSpecialize.variableDeclarationConst([_esastDistAst.VariableDeclarator(ExtractVar, _util.msExtract(t0(this.test.type), t0(this.test.patterned)))]);
			const test = _esastUtil.binaryExpressionNotEqual(ExtractVar, _esastDistAst.Literal(null));
			const ext = arrayExtract(this.test.locals);
			const res = t3(this.result, [ext]);
			return _esastDistAst.BlockStatement([decl, _esastDistAst.IfStatement(test, res, alternate)]);
		} else {
			const checkedTest = cx.opts.includeCaseChecks() ? _util.msBool(t0(this.test)) : t0(this.test);
			// alternate written to by `caseBody`.
			return _esastDistAst.IfStatement(checkedTest, t0(this.result), alternate);
		}
	}

	_UUtil.implementMany(_Expression, 'transpileSubtree', {
		Assign: function () {
			return _esastDistSpecialize.variableDeclarationConst([_util.makeDeclarator(cx, this.loc, this.assignee, t0(this.value), false, vr.isExportAssign(this))]);
		},
		// TODO:ES6 Just use native destructuring assign
		AssignDestructure: function () {
			return _esastDistSpecialize.variableDeclarationConst(_util.makeDestructureDeclarators(cx, this.loc, this.assignees, this.isLazy, t0(this.value), false, vr.isExportAssign(this)));
		},
		BlockDo: transpileBlock,
		BlockVal: transpileBlock,
		BlockWrap: function () {
			return blockWrap(this, t0(this.block));
		},
		Call: function () {
			const anySplat = this.args.some(function (arg) {
				return arg instanceof _Expression.Splat;
			});
			if (anySplat) {
				const args = this.args.map(function (arg) {
					return arg instanceof _Expression.Splat ? _util.msArr(t0(arg.splatted)) : t0(arg);
				});
				return _esastDistAst.CallExpression(_util.IdFunctionApplyCall, [t0(this.called), _util.LitNull, _esastDistAst.CallExpression(_esastDistUtil.member(_util.LitEmptyArray, 'concat'), args)]);
			} else return _esastDistAst.CallExpression(t0(this.called), this.args.map(t0));
		},
		CaseDo: function () {
			const body = caseBody(this.parts, this.opElse);
			return _UOp.ifElse(this.opCased, function (_) {
				return _esastDistAst.BlockStatement([t0(_), body]);
			}, function () {
				return body;
			});
		},
		CaseVal: function () {
			const body = caseBody(this.parts, this.opElse);
			const block = _UOp.ifElse(this.opCased, function (_) {
				return [t0(_), body];
			}, function () {
				return [body];
			});
			return blockWrap(this, _esastDistAst.BlockStatement(block));
		},
		CaseDoPart: casePart,
		CaseValPart: casePart,
		// TODO: includeInoutChecks is misnamed
		Debug: function () {
			return cx.opts.includeInoutChecks() ? _UBag.flatMap(this.lines, function (line) {
				return _util.toStatements(t0(line));
			}) : [];
		},
		ObjReturn: function () {
			var _this2 = this;

			// TODO: includeTypeChecks() is not the right method for this
			const keys = cx.opts.includeTypeChecks() ? this.keys : this.keys.filter(function (_) {
				return !vr.isDebugLocal(_);
			});
			return _UOp.ifElse(this.opObjed, function (objed) {
				const astObjed = t0(objed);
				const keysVals = _UBag.cat(_UBag.flatMap(keys, function (key) {
					return [_esastDistAst.Literal(key.name), _util.accessLocalDeclare(key)];
				}), _UOp.opMap(_this2.opDisplayName, function (_) {
					return [_util.LitStrDisplayName, _esastDistAst.Literal(_)];
				}));
				const anyLazy = keys.some(function (key) {
					return key.isLazy;
				});
				return (anyLazy ? _util.msLset : _util.msSet).apply(undefined, [astObjed].concat(_toConsumableArray(keysVals)));
			}, function () {
				const props = keys.map(function (key) {
					const val = _util.accessLocalDeclare(key);
					const id = _esastDistUtil.propertyIdOrLiteralCached(key.name);
					return key.isLazy ? _esastDistSpecialize.property('get', id, _esastDistUtil.thunk(val)) : _esastDistSpecialize.property('init', id, val);
				});
				const opPropDisplayName = _UOp.opMap(_this2.opDisplayName, function (_) {
					return _esastDistSpecialize.property('init', _util.IdDisplayName, _esastDistAst.Literal(_));
				});
				return _esastDistAst.ObjectExpression(_UBag.cat(props, opPropDisplayName));
			});
		},
		ObjSimple: function () {
			return _esastDistAst.ObjectExpression(this.pairs.map(function (pair) {
				return _esastDistSpecialize.property('init', _esastDistUtil.propertyIdOrLiteralCached(pair.key), t0(pair.value));
			}));
		},
		EndLoop: function () {
			return _esastDistAst.BreakStatement(loopId(vr.endLoopToLoop.get(this)));
		},
		Fun: function () {
			const oldInGenerator = isInGenerator;
			isInGenerator = this.isGenerator;

			// TODO:ES6 use `...`
			const nArgs = _esastDistAst.Literal(this.args.length);
			const opDeclareRest = _UOp.opMap(this.opRestArg, function (rest) {
				return _esastUtil.declare(rest, _esastDistAst.CallExpression(_util.IdArraySliceCall, [_util.IdArguments, nArgs]));
			});
			const argChecks = _UOp.flatOpMap(this.args, function (_) {
				return _util.opLocalCheck(cx, _, _.isLazy);
			});
			const _in = _UOp.opMap(this.opIn, t0);
			const lead = _UBag.cat(opDeclareRest, argChecks, _in);

			const _out = _UOp.opMap(this.opOut, t0);
			const body = t3(this.block, lead, this.opResDeclare, _out);
			const args = this.args.map(t0);
			const res = _esastDistSpecialize.functionExpressionPlain(args, body, this.isGenerator);

			isInGenerator = oldInGenerator;
			return res;
		},
		Lazy: function () {
			return _util.lazyWrap(t0(this.value));
		},
		ListReturn: function () {
			const length = vr.listMapLength(this);
			_UUtil.assert(length >= 0);
			return _esastDistAst.ArrayExpression(_UBag.range(0, length).map(function (i) {
				return _esastDistUtil.idCached('_' + i);
			}));
		},
		ListSimple: function () {
			return _esastDistAst.ArrayExpression(this.parts.map(t0));
		},
		ListEntry: function () {
			return _esastUtil.declareSpecial('_' + vr.listMapEntryIndex(this), t0(this.value));
		},
		NumberLiteral: function () {
			// Negative numbers are not part of ES spec.
			// http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.3
			const lit = _esastDistAst.Literal(Math.abs(this.value));
			return _UUtil.isPositive(this.value) ? lit : _esastUtil.unaryExpressionNegate(lit);
		},
		GlobalAccess: function () {
			return _esastDistAst.Identifier(this.name);
		},
		LocalAccess: function () {
			return _util.accessLocal(this, vr);
		},
		LocalDeclare: function () {
			return _esastUtil.idForDeclareCached(this);
		},
		// TODO: Don't always label!
		Loop: function () {
			return _esastDistAst.LabeledStatement(loopId(this), _esastUtil.whileStatementInfinite(t0(this.block)));
		},
		MapEntry: function () {
			const index = vr.listMapEntryIndex(this);
			const k = '_k' + index;
			const v = '_v' + index;
			return _esastDistSpecialize.variableDeclarationConst([_esastDistAst.VariableDeclarator(_esastDistUtil.idCached(k), t0(this.key)), _esastDistAst.VariableDeclarator(_esastDistUtil.idCached(v), t0(this.val))]);
		},
		MapReturn: function () {
			const length = vr.listMapLength(this);
			return _util.msMap.apply(undefined, _toConsumableArray(_UBag.flatMap(_UBag.range(0, length), function (i) {
				return [_esastDistUtil.idCached('_k' + i), _esastDistUtil.idCached('_v' + i)];
			})));
		},
		Member: function () {
			return _esastDistUtil.member(t0(this.object), this.name);
		},
		Module: function () {
			return _transpileModule2(this, cx);
		},
		// TODO:ES6 Use `export default`
		ModuleDefaultExport: function () {
			const m = _esastDistUtil.member(_util.IdExports, 'default');
			return _esastDistAst.AssignmentExpression('=', m, t0(this.value));
		},
		Quote: function () {
			// TODO:ES6 use template strings
			const part0 = this.parts[0];

			var _ref = typeof part0 === 'string' ? [_esastDistAst.Literal(part0), _UBag.tail(this.parts)] : [_util.LitEmptyString, this.parts];

			var _ref2 = _slicedToArray(_ref, 2);

			const first = _ref2[0];
			const restParts = _ref2[1];

			return restParts.reduce(function (ex, _) {
				return _esastUtil.binaryExpressionPlus(ex, typeof _ === 'string' ? _esastDistAst.Literal(_) : _util.msShow(t0(_)));
			}, first);
		},
		Special: function () {
			// Make new objects because we will assign `loc` to them.
			switch (this.kind) {
				case _Expression.SP_Contains:
					return _esastDistUtil.member(_util.IdMs, 'contains');
				case _Expression.SP_Debugger:
					return _esastDistAst.DebuggerStatement();
				case _Expression.SP_False:
					return _esastDistAst.Literal(false);
				case _Expression.SP_Sub:
					return _esastDistUtil.member(_util.IdMs, 'sub');
				case _Expression.SP_This:
					return _esastDistAst.ThisExpression();
				case _Expression.SP_ThisModuleDirectory:
					return _esastDistAst.Identifier('__dirname');
				case _Expression.SP_True:
					return _esastDistAst.Literal(true);
				default:
					throw new Error(this.kind);
			}
		},
		Splat: function () {
			cx.fail(this.loc, 'Splat must appear as argument to a call.');
		},
		Yield: function () {
			return _esastDistSpecialize.yieldExpressionNoDelegate(t0(this.yielded));
		},
		YieldTo: function () {
			return _esastDistSpecialize.yieldExpressionDelegate(t0(this.yieldedTo));
		}
	});

	const arrayExtract = function (locals) {
		return _esastDistSpecialize.variableDeclarationConst(locals.map(function (l, index) {
			return _esastDistAst.VariableDeclarator(_esastUtil.idForDeclareCached(l), _esastDistSpecialize.memberExpression(ExtractVar, _esastDistAst.Literal(index)));
		}));
	},
	      blockWrap = function (_, block) {
		const invoke = _esastDistSpecialize.callExpressionThunk(_esastDistSpecialize.functionExpressionThunk(block, isInGenerator));
		return isInGenerator ? _esastDistSpecialize.yieldExpressionDelegate(invoke) : invoke;
	},
	      caseBody = function (parts, opElse) {
		let acc = _UOp.ifElse(opElse, t0, function () {
			return _esastUtil.throwError('No branch of `case` matches.');
		});
		for (let i = parts.length - 1; i >= 0; i = i - 1) acc = t1(parts[i], acc);
		return acc;
	},
	      loopId = function (loop) {
		return _esastDistUtil.idCached('loop' + loop.loc.start.line);
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ldGEvY29tcGlsZS9wcml2YXRlL3RyYW5zcGlsZS90cmFuc3BpbGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O21CQTZCd0IsU0FBUzs7Ozs7Ozs7OztBQUpqQyxPQUFNLFVBQVUsR0FBRyxjQXhCaUIsVUFBVSxDQXdCaEIsSUFBSSxDQUFDLENBQUE7O0FBRW5DLEtBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxhQUFhLENBQUE7O0FBRVYsVUFBUyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUU7QUFDOUMsSUFBRSxHQUFHLEdBQUcsQ0FBQTtBQUNSLElBQUUsR0FBRyxHQUFHLENBQUE7QUFDUixlQUFhLEdBQUcsS0FBSyxDQUFBO0FBQ3JCLFFBQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTs7QUFFakIsSUFBRSxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUE7QUFDbkIsU0FBTyxHQUFHLENBQUE7RUFDVjs7QUFFTSxPQUFNLEVBQUUsR0FBRyxVQUFBLElBQUksRUFBSTtBQUN6QixRQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQTtBQUNuQyxLQUFHLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUE7QUFDbEIsU0FBTyxHQUFHLENBQUE7RUFDVixDQUFBO1NBSlksRUFBRSxHQUFGLEVBQUU7QUFLZixPQUFNLEVBQUUsR0FBRyxVQUFDLElBQUksRUFBRSxHQUFHLEVBQUs7QUFDekIsUUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFBO0FBQ3RDLEtBQUcsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQTtBQUNsQixTQUFPLEdBQUcsQ0FBQTtFQUNWLENBQUE7QUFDRCxPQUFNLEVBQUUsR0FBRyxVQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBSztBQUNyQyxRQUFNLEdBQUcsR0FB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dHJhbnNwaWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXJyYXlFeHByZXNzaW9uLCBBc3NpZ25tZW50RXhwcmVzc2lvbiwgQmxvY2tTdGF0ZW1lbnQsIEJyZWFrU3RhdGVtZW50LFxuXHRDYWxsRXhwcmVzc2lvbiwgRGVidWdnZXJTdGF0ZW1lbnQsIElkZW50aWZpZXIsIElmU3RhdGVtZW50LCBMYWJlbGVkU3RhdGVtZW50LCBMaXRlcmFsLFxuXHRPYmplY3RFeHByZXNzaW9uLCBUaGlzRXhwcmVzc2lvbiwgVmFyaWFibGVEZWNsYXJhdG9yLCBSZXR1cm5TdGF0ZW1lbnQgfSBmcm9tICdlc2FzdC9kaXN0L2FzdCdcbmltcG9ydCB7IGlkQ2FjaGVkLCBtZW1iZXIsIHByb3BlcnR5SWRPckxpdGVyYWxDYWNoZWQsIHRodW5rIH0gZnJvbSAnZXNhc3QvZGlzdC91dGlsJ1xuaW1wb3J0IHsgY2FsbEV4cHJlc3Npb25UaHVuaywgZnVuY3Rpb25FeHByZXNzaW9uUGxhaW4sIGZ1bmN0aW9uRXhwcmVzc2lvblRodW5rLCBtZW1iZXJFeHByZXNzaW9uLFxuXHRwcm9wZXJ0eSwgdmFyaWFibGVEZWNsYXJhdGlvbkNvbnN0LCB5aWVsZEV4cHJlc3Npb25EZWxlZ2F0ZSwgeWllbGRFeHByZXNzaW9uTm9EZWxlZ2F0ZVxuXHR9IGZyb20gJ2VzYXN0L2Rpc3Qvc3BlY2lhbGl6ZSdcbmltcG9ydCAqIGFzIEVFeHBvcnRzIGZyb20gJy4uLy4uL0V4cHJlc3Npb24nXG5pbXBvcnQgeyBCbG9ja1ZhbCwgUGF0dGVybiwgU3BsYXQsXG5cdFNQX0NvbnRhaW5zLCBTUF9EZWJ1Z2dlciwgU1BfRmFsc2UsIFNQX1N1YiwgU1BfVGhpcywgU1BfVGhpc01vZHVsZURpcmVjdG9yeSwgU1BfVHJ1ZVxuXHR9IGZyb20gJy4uLy4uL0V4cHJlc3Npb24nXG5pbXBvcnQgeyBjYXQsIGZsYXRNYXAsIHJhbmdlLCB0YWlsIH0gZnJvbSAnLi4vVS9CYWcnXG5pbXBvcnQgeyBmbGF0T3BNYXAsIGlmRWxzZSwgb3BJZiwgb3BNYXAgfSBmcm9tICcuLi9VL29wJ1xuaW1wb3J0IHsgYXNzZXJ0LCBpbXBsZW1lbnRNYW55LCBpc1Bvc2l0aXZlIH0gZnJvbSAnLi4vVS91dGlsJ1xuaW1wb3J0IHsgYmluYXJ5RXhwcmVzc2lvblBsdXMsIGJpbmFyeUV4cHJlc3Npb25Ob3RFcXVhbCwgZGVjbGFyZSwgZGVjbGFyZVNwZWNpYWwsXG5cdGlkRm9yRGVjbGFyZUNhY2hlZCwgdGhyb3dFcnJvciwgdW5hcnlFeHByZXNzaW9uTmVnYXRlLCB3aGlsZVN0YXRlbWVudEluZmluaXRlXG5cdH0gZnJvbSAnLi9lc2FzdC11dGlsJ1xuaW1wb3J0IHRyYW5zcGlsZU1vZHVsZSBmcm9tICcuL3RyYW5zcGlsZU1vZHVsZSdcbmltcG9ydCB7XG5cdElkQXJndW1lbnRzLCBJZEFycmF5U2xpY2VDYWxsLCBJZERpc3BsYXlOYW1lLCBJZEV4cG9ydHMsIElkRnVuY3Rpb25BcHBseUNhbGwsIElkTXMsXG5cdExpdEVtcHR5QXJyYXksIExpdEVtcHR5U3RyaW5nLCBMaXROdWxsLCBMaXRTdHJEaXNwbGF5TmFtZSwgUmV0dXJuUmVzLFxuXHRhY2Nlc3NMb2NhbCwgYWNjZXNzTG9jYWxEZWNsYXJlLCBsYXp5V3JhcCwgbWFrZURlY2xhcmF0b3IsIG1ha2VEZXN0cnVjdHVyZURlY2xhcmF0b3JzLFxuXHRtYXliZVdyYXBJbkNoZWNrQ29udGFpbnMsIG9wTG9jYWxDaGVjaywgdG9TdGF0ZW1lbnRzLFxuXHRtc0FyciwgbXNCb29sLCBtc0V4dHJhY3QsIG1zTHNldCwgbXNNYXAsIG1zU2V0LCBtc1Nob3cgfSBmcm9tICcuL3V0aWwnXG5cbmNvbnN0IEV4dHJhY3RWYXIgPSBJZGVudGlmaWVyKCdfJCcpXG5cbmxldCBjeCwgdnIsIGlzSW5HZW5lcmF0b3JcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNwaWxlKF9jeCwgZSwgX3ZyKSB7XG5cdGN4ID0gX2N4XG5cdHZyID0gX3ZyXG5cdGlzSW5HZW5lcmF0b3IgPSBmYWxzZVxuXHRjb25zdCByZXMgPSB0MChlKVxuXHQvLyBSZWxlYXNlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb25cblx0Y3ggPSB2ciA9IHVuZGVmaW5lZFxuXHRyZXR1cm4gcmVzXG59XG5cbmV4cG9ydCBjb25zdCB0MCA9IGV4cHIgPT4ge1xuXHRjb25zdCBhc3QgPSBleHByLnRyYW5zcGlsZVN1YnRyZWUoKVxuXHRhc3QubG9jID0gZXhwci5sb2Ncblx0cmV0dXJuIGFzdFxufVxuY29uc3QgdDEgPSAoZXhwciwgYXJnKSA9PiB7XG5cdGNvbnN0IGFzdCA9IGV4cHIudHJhbnNwaWxlU3VidHJlZShhcmcpXG5cdGFzdC5sb2MgPSBleHByLmxvY1xuXHRyZXR1cm4gYXN0XG59XG5jb25zdCB0MyA9IChleHByLCBhcmcsIGFyZzIsIGFyZzMpID0+IHtcblx0Y29uc3QgYXN0ID0gZXhwci50cmFuc3BpbGVTdWJ0cmVlKGFyZywgYXJnMiwgYXJnMylcblx0YXN0LmxvYyA9IGV4cHIubG9jXG5cdHJldHVybiBhc3Rcbn1cbmV4cG9ydCBjb25zdCB0bSA9IGV4cHIgPT4ge1xuXHRjb25zdCBhc3QgPSBleHByLnRyYW5zcGlsZVN1YnRyZWUoKVxuXHRpZiAoIShhc3QgaW5zdGFuY2VvZiBBcnJheSkpXG5cdFx0Ly8gRGVidWcgbWF5IHByb2R1Y2UgbXVsdGlwbGUgc3RhdGVtZW50cy5cblx0XHRhc3QubG9jID0gZXhwci5sb2Ncblx0cmV0dXJuIGFzdFxufVxuXG5mdW5jdGlvbiB0cmFuc3BpbGVCbG9jayhsZWFkLCBvcFJlc0RlY2xhcmUsIG9wT3V0KSB7XG5cdGlmIChsZWFkID09PSB1bmRlZmluZWQpXG5cdFx0bGVhZCA9IFtdXG5cdGlmIChvcFJlc0RlY2xhcmUgPT09IHVuZGVmaW5lZClcblx0XHRvcFJlc0RlY2xhcmUgPSBvcE91dCA9IG51bGxcblx0Y29uc3QgYm9keSA9IGZsYXRNYXAodGhpcy5saW5lcywgbGluZSA9PiB0b1N0YXRlbWVudHModG0obGluZSkpKVxuXHRjb25zdCBpc1ZhbCA9IHRoaXMgaW5zdGFuY2VvZiBCbG9ja1ZhbFxuXHRjb25zdCBmaW4gPSBpZkVsc2Uob3BSZXNEZWNsYXJlLFxuXHRcdHJkID0+IHtcblx0XHRcdGFzc2VydChpc1ZhbClcblx0XHRcdGNvbnN0IHJldHVybmVkID0gbWF5YmVXcmFwSW5DaGVja0NvbnRhaW5zKGN4LCB0MCh0aGlzLnJldHVybmVkKSwgcmQub3BUeXBlLCAncmVzJylcblx0XHRcdHJldHVybiBpZkVsc2Uob3BPdXQsXG5cdFx0XHRcdF8gPT4gY2F0KGRlY2xhcmUocmQsIHJldHVybmVkKSwgXywgUmV0dXJuUmVzKSxcblx0XHRcdFx0KCkgPT4gUmV0dXJuU3RhdGVtZW50KHJldHVybmVkKSlcblx0XHR9LFxuXHRcdCgpID0+IGNhdChvcE91dCwgb3BJZihpc1ZhbCwgKCkgPT4gUmV0dXJuU3RhdGVtZW50KHQwKHRoaXMucmV0dXJuZWQpKSkpKVxuXHRyZXR1cm4gQmxvY2tTdGF0ZW1lbnQoY2F0KGxlYWQsIGJvZHksIGZpbikpXG59XG5cbmZ1bmN0aW9uIGNhc2VQYXJ0KGFsdGVybmF0ZSkge1xuXHRpZiAodGhpcy50ZXN0IGluc3RhbmNlb2YgUGF0dGVybikge1xuXHRcdGNvbnN0IGRlY2wgPSB2YXJpYWJsZURlY2xhcmF0aW9uQ29uc3QoW1xuXHRcdFx0VmFyaWFibGVEZWNsYXJhdG9yKFxuXHRcdFx0XHRFeHRyYWN0VmFyLFxuXHRcdFx0XHRtc0V4dHJhY3QodDAodGhpcy50ZXN0LnR5cGUpLCB0MCh0aGlzLnRlc3QucGF0dGVybmVkKSkpXG5cdFx0XHRdKVxuXHRcdGNvbnN0IHRlc3QgPSBiaW5hcnlFeHByZXNzaW9uTm90RXF1YWwoRXh0cmFjdFZhciwgTGl0ZXJhbChudWxsKSlcblx0XHRjb25zdCBleHQgPSBhcnJheUV4dHJhY3QodGhpcy50ZXN0LmxvY2Fscylcblx0XHRjb25zdCByZXMgPSB0Myh0aGlzLnJlc3VsdCwgWyBleHQgXSlcblx0XHRyZXR1cm4gQmxvY2tTdGF0ZW1lbnQoWyBkZWNsLCBJZlN0YXRlbWVudCh0ZXN0LCByZXMsIGFsdGVybmF0ZSkgXSlcblx0fSBlbHNlIHtcblx0XHRjb25zdCBjaGVja2VkVGVzdCA9IGN4Lm9wdHMuaW5jbHVkZUNhc2VDaGVja3MoKSA/IG1zQm9vbCh0MCh0aGlzLnRlc3QpKSA6IHQwKHRoaXMudGVzdClcblx0XHQvLyBhbHRlcm5hdGUgd3JpdHRlbiB0byBieSBgY2FzZUJvZHlgLlxuXHRcdHJldHVybiBJZlN0YXRlbWVudChjaGVja2VkVGVzdCwgdDAodGhpcy5yZXN1bHQpLCBhbHRlcm5hdGUpXG5cdH1cbn1cblxuaW1wbGVtZW50TWFueShFRXhwb3J0cywgJ3RyYW5zcGlsZVN1YnRyZWUnLCB7XG5cdEFzc2lnbigpIHtcblx0XHRyZXR1cm4gdmFyaWFibGVEZWNsYXJhdGlvbkNvbnN0KFtcblx0XHRcdG1ha2VEZWNsYXJhdG9yKFxuXHRcdFx0XHRjeCwgdGhpcy5sb2MsXG5cdFx0XHRcdHRoaXMuYXNzaWduZWUsXG5cdFx0XHRcdHQwKHRoaXMudmFsdWUpLFxuXHRcdFx0XHRmYWxzZSwgdnIuaXNFeHBvcnRBc3NpZ24odGhpcykpIF0pXG5cdH0sXG5cdC8vIFRPRE86RVM2IEp1c3QgdXNlIG5hdGl2ZSBkZXN0cnVjdHVyaW5nIGFzc2lnblxuXHRBc3NpZ25EZXN0cnVjdHVyZSgpIHtcblx0XHRyZXR1cm4gdmFyaWFibGVEZWNsYXJhdGlvbkNvbnN0KFxuXHRcdFx0bWFrZURlc3RydWN0dXJlRGVjbGFyYXRvcnMoXG5cdFx0XHRcdGN4LFxuXHRcdFx0XHR0aGlzLmxvYyxcblx0XHRcdFx0dGhpcy5hc3NpZ25lZXMsXG5cdFx0XHRcdHRoaXMuaXNMYXp5LFxuXHRcdFx0XHR0MCh0aGlzLnZhbHVlKSxcblx0XHRcdFx0ZmFsc2UsXG5cdFx0XHRcdHZyLmlzRXhwb3J0QXNzaWduKHRoaXMpKSlcblx0fSxcblx0QmxvY2tEbzogdHJhbnNwaWxlQmxvY2ssXG5cdEJsb2NrVmFsOiB0cmFuc3BpbGVCbG9jayxcblx0QmxvY2tXcmFwKCkgeyByZXR1cm4gYmxvY2tXcmFwKHRoaXMsIHQwKHRoaXMuYmxvY2spKSB9LFxuXHRDYWxsKCkge1xuXHRcdGNvbnN0IGFueVNwbGF0ID0gdGhpcy5hcmdzLnNvbWUoYXJnID0+IGFyZyBpbnN0YW5jZW9mIFNwbGF0KVxuXHRcdGlmIChhbnlTcGxhdCkge1xuXHRcdFx0Y29uc3QgYXJncyA9IHRoaXMuYXJncy5tYXAoYXJnID0+XG5cdFx0XHRcdGFyZyBpbnN0YW5jZW9mIFNwbGF0ID9cblx0XHRcdFx0XHRtc0Fycih0MChhcmcuc3BsYXR0ZWQpKSA6XG5cdFx0XHRcdFx0dDAoYXJnKSlcblx0XHRcdHJldHVybiBDYWxsRXhwcmVzc2lvbihJZEZ1bmN0aW9uQXBwbHlDYWxsLCBbXG5cdFx0XHRcdHQwKHRoaXMuY2FsbGVkKSxcblx0XHRcdFx0TGl0TnVsbCxcblx0XHRcdFx0Q2FsbEV4cHJlc3Npb24obWVtYmVyKExpdEVtcHR5QXJyYXksICdjb25jYXQnKSwgYXJncyldKVxuXHRcdH1cblx0XHRlbHNlIHJldHVybiBDYWxsRXhwcmVzc2lvbih0MCh0aGlzLmNhbGxlZCksIHRoaXMuYXJncy5tYXAodDApKVxuXHR9LFxuXHRDYXNlRG8oKSB7XG5cdFx0Y29uc3QgYm9keSA9IGNhc2VCb2R5KHRoaXMucGFydHMsIHRoaXMub3BFbHNlKVxuXHRcdHJldHVybiBpZkVsc2UodGhpcy5vcENhc2VkLCBfID0+IEJsb2NrU3RhdGVtZW50KFsgdDAoXyksIGJvZHkgXSksICgpID0+IGJvZHkpXG5cdH0sXG5cdENhc2VWYWwoKSB7XG5cdFx0Y29uc3QgYm9keSA9IGNhc2VCb2R5KHRoaXMucGFydHMsIHRoaXMub3BFbHNlKVxuXHRcdGNvbnN0IGJsb2NrID0gaWZFbHNlKHRoaXMub3BDYXNlZCwgXyA9PiBbIHQwKF8pLCBib2R5IF0sICgpID0+IFsgYm9keSBdKVxuXHRcdHJldHVybiBibG9ja1dyYXAodGhpcywgQmxvY2tTdGF0ZW1lbnQoYmxvY2spKVxuXHR9LFxuXHRDYXNlRG9QYXJ0OiBjYXNlUGFydCxcblx0Q2FzZVZhbFBhcnQ6IGNhc2VQYXJ0LFxuXHQvLyBUT0RPOiBpbmNsdWRlSW5vdXRDaGVja3MgaXMgbWlzbmFtZWRcblx0RGVidWcoKSB7XG5cdFx0cmV0dXJuIGN4Lm9wdHMuaW5jbHVkZUlub3V0Q2hlY2tzKCkgP1xuXHRcdFx0ZmxhdE1hcCh0aGlzLmxpbmVzLCBsaW5lID0+IHRvU3RhdGVtZW50cyh0MChsaW5lKSkpIDpcblx0XHRcdFsgXVxuXHR9LFxuXHRPYmpSZXR1cm4oKSB7XG5cdFx0Ly8gVE9ETzogaW5jbHVkZVR5cGVDaGVja3MoKSBpcyBub3QgdGhlIHJpZ2h0IG1ldGhvZCBmb3IgdGhpc1xuXHRcdGNvbnN0IGtleXMgPVxuXHRcdFx0Y3gub3B0cy5pbmNsdWRlVHlwZUNoZWNrcygpID8gdGhpcy5rZXlzIDogdGhpcy5rZXlzLmZpbHRlcihfID0+ICF2ci5pc0RlYnVnTG9jYWwoXykpXG5cdFx0cmV0dXJuIGlmRWxzZSh0aGlzLm9wT2JqZWQsXG5cdFx0XHRvYmplZCA9PiB7XG5cdFx0XHRcdGNvbnN0IGFzdE9iamVkID0gdDAob2JqZWQpXG5cdFx0XHRcdGNvbnN0IGtleXNWYWxzID0gY2F0KFxuXHRcdFx0XHRcdGZsYXRNYXAoa2V5cywga2V5ID0+IFsgTGl0ZXJhbChrZXkubmFtZSksIGFjY2Vzc0xvY2FsRGVjbGFyZShrZXkpIF0pLFxuXHRcdFx0XHRcdG9wTWFwKHRoaXMub3BEaXNwbGF5TmFtZSwgXyA9PiBbIExpdFN0ckRpc3BsYXlOYW1lLCBMaXRlcmFsKF8pIF0pKVxuXHRcdFx0XHRjb25zdCBhbnlMYXp5ID0ga2V5cy5zb21lKGtleSA9PiBrZXkuaXNMYXp5KVxuXHRcdFx0XHRyZXR1cm4gKGFueUxhenkgPyBtc0xzZXQgOiBtc1NldCkoYXN0T2JqZWQsIC4uLmtleXNWYWxzKVxuXHRcdFx0fSxcblx0XHRcdCgpID0+IHtcblx0XHRcdFx0Y29uc3QgcHJvcHMgPSBrZXlzLm1hcChrZXkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHZhbCA9IGFjY2Vzc0xvY2FsRGVjbGFyZShrZXkpXG5cdFx0XHRcdFx0Y29uc3QgaWQgPSBwcm9wZXJ0eUlkT3JMaXRlcmFsQ2FjaGVkKGtleS5uYW1lKVxuXHRcdFx0XHRcdHJldHVybiBrZXkuaXNMYXp5ID9cblx0XHRcdFx0XHRcdHByb3BlcnR5KCdnZXQnLCBpZCwgdGh1bmsodmFsKSkgOlxuXHRcdFx0XHRcdFx0cHJvcGVydHkoJ2luaXQnLCBpZCwgdmFsKVxuXHRcdFx0XHR9KVxuXHRcdFx0XHRjb25zdCBvcFByb3BEaXNwbGF5TmFtZSA9IG9wTWFwKHRoaXMub3BEaXNwbGF5TmFtZSwgXyA9PlxuXHRcdFx0XHRcdHByb3BlcnR5KCdpbml0JywgSWREaXNwbGF5TmFtZSwgTGl0ZXJhbChfKSkpXG5cdFx0XHRcdHJldHVybiBPYmplY3RFeHByZXNzaW9uKGNhdChwcm9wcywgb3BQcm9wRGlzcGxheU5hbWUpKVxuXHRcdFx0fSlcblx0fSxcblx0T2JqU2ltcGxlKCkge1xuXHRcdHJldHVybiBPYmplY3RFeHByZXNzaW9uKHRoaXMucGFpcnMubWFwKHBhaXIgPT5cblx0XHRcdHByb3BlcnR5KCdpbml0JywgcHJvcGVydHlJZE9yTGl0ZXJhbENhY2hlZChwYWlyLmtleSksIHQwKHBhaXIudmFsdWUpKSkpXG5cdH0sXG5cdEVuZExvb3AoKSB7IHJldHVybiBCcmVha1N0YXRlbWVudChsb29wSWQodnIuZW5kTG9vcFRvTG9vcC5nZXQodGhpcykpKSB9LFxuXHRGdW4oKSB7XG5cdFx0Y29uc3Qgb2xkSW5HZW5lcmF0b3IgPSBpc0luR2VuZXJhdG9yXG5cdFx0aXNJbkdlbmVyYXRvciA9IHRoaXMuaXNHZW5lcmF0b3JcblxuXHRcdC8vIFRPRE86RVM2IHVzZSBgLi4uYFxuXHRcdGNvbnN0IG5BcmdzID0gTGl0ZXJhbCh0aGlzLmFyZ3MubGVuZ3RoKVxuXHRcdGNvbnN0IG9wRGVjbGFyZVJlc3QgPSBvcE1hcCh0aGlzLm9wUmVzdEFyZywgcmVzdCA9PlxuXHRcdFx0ZGVjbGFyZShyZXN0LCBDYWxsRXhwcmVzc2lvbihJZEFycmF5U2xpY2VDYWxsLCBbSWRBcmd1bWVudHMsIG5BcmdzXSkpKVxuXHRcdGNvbnN0IGFyZ0NoZWNrcyA9IGZsYXRPcE1hcCh0aGlzLmFyZ3MsIF8gPT4gb3BMb2NhbENoZWNrKGN4LCBfLCBfLmlzTGF6eSkpXG5cdFx0Y29uc3QgX2luID0gb3BNYXAodGhpcy5vcEluLCB0MClcblx0XHRjb25zdCBsZWFkID0gY2F0KG9wRGVjbGFyZVJlc3QsIGFyZ0NoZWNrcywgX2luKVxuXG5cdFx0Y29uc3QgX291dCA9IG9wTWFwKHRoaXMub3BPdXQsIHQwKVxuXHRcdGNvbnN0IGJvZHkgPSB0Myh0aGlzLmJsb2NrLCBsZWFkLCB0aGlzLm9wUmVzRGVjbGFyZSwgX291dClcblx0XHRjb25zdCBhcmdzID0gdGhpcy5hcmdzLm1hcCh0MClcblx0XHRjb25zdCByZXMgPSBmdW5jdGlvbkV4cHJlc3Npb25QbGFpbihhcmdzLCBib2R5LCB0aGlzLmlzR2VuZXJhdG9yKVxuXG5cdFx0aXNJbkdlbmVyYXRvciA9IG9sZEluR2VuZXJhdG9yXG5cdFx0cmV0dXJuIHJlc1xuXHR9LFxuXHRMYXp5KCkgeyByZXR1cm4gbGF6eVdyYXAodDAodGhpcy52YWx1ZSkpIH0sXG5cdExpc3RSZXR1cm4oKSB7XG5cdFx0Y29uc3QgbGVuZ3RoID0gdnIubGlzdE1hcExlbmd0aCh0aGlzKVxuXHRcdGFzc2VydChsZW5ndGggPj0gMClcblx0XHRyZXR1cm4gQXJyYXlFeHByZXNzaW9uKHJhbmdlKDAsIGxlbmd0aCkubWFwKGkgPT4gaWRDYWNoZWQoYF8ke2l9YCkpKVxuXHR9LFxuXHRMaXN0U2ltcGxlKCkgeyByZXR1cm4gQXJyYXlFeHByZXNzaW9uKHRoaXMucGFydHMubWFwKHQwKSkgfSxcblx0TGlzdEVudHJ5KCkgeyByZXR1cm4gZGVjbGFyZVNwZWNpYWwoYF8ke3ZyLmxpc3RNYXBFbnRyeUluZGV4KHRoaXMpfWAsIHQwKHRoaXMudmFsdWUpKSB9LFxuXHROdW1iZXJMaXRlcmFsKCkge1xuXHRcdC8vIE5lZ2F0aXZlIG51bWJlcnMgYXJlIG5vdCBwYXJ0IG9mIEVTIHNwZWMuXG5cdFx0Ly8gaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTcuOC4zXG5cdFx0Y29uc3QgbGl0ID0gTGl0ZXJhbChNYXRoLmFicyh0aGlzLnZhbHVlKSlcblx0XHRyZXR1cm4gaXNQb3NpdGl2ZSh0aGlzLnZhbHVlKSA/IGxpdCA6IHVuYXJ5RXhwcmVzc2lvbk5lZ2F0ZShsaXQpXG5cdH0sXG5cdEdsb2JhbEFjY2VzcygpIHsgcmV0dXJuIElkZW50aWZpZXIodGhpcy5uYW1lKSB9LFxuXHRMb2NhbEFjY2VzcygpIHsgcmV0dXJuIGFjY2Vzc0xvY2FsKHRoaXMsIHZyKSB9LFxuXHRMb2NhbERlY2xhcmUoKSB7IHJldHVybiBpZEZvckRlY2xhcmVDYWNoZWQodGhpcykgfSxcblx0Ly8gVE9ETzogRG9uJ3QgYWx3YXlzIGxhYmVsIVxuXHRMb29wKCkge1xuXHRcdHJldHVybiBMYWJlbGVkU3RhdGVtZW50KGxvb3BJZCh0aGlzKSwgd2hpbGVTdGF0ZW1lbnRJbmZpbml0ZSh0MCh0aGlzLmJsb2NrKSkpXG5cdH0sXG5cdE1hcEVudHJ5KCkge1xuXHRcdGNvbnN0IGluZGV4ID0gdnIubGlzdE1hcEVudHJ5SW5kZXgodGhpcylcblx0XHRjb25zdCBrID0gYF9rJHtpbmRleH1gXG5cdFx0Y29uc3QgdiA9IGBfdiR7aW5kZXh9YFxuXHRcdHJldHVybiB2YXJpYWJsZURlY2xhcmF0aW9uQ29uc3QoW1xuXHRcdFx0VmFyaWFibGVEZWNsYXJhdG9yKGlkQ2FjaGVkKGspLCB0MCh0aGlzLmtleSkpLFxuXHRcdFx0VmFyaWFibGVEZWNsYXJhdG9yKGlkQ2FjaGVkKHYpLCB0MCh0aGlzLnZhbCkpXG5cdFx0XSlcblx0fSxcblx0TWFwUmV0dXJuKCkge1xuXHRcdGNvbnN0IGxlbmd0aCA9IHZyLmxpc3RNYXBMZW5ndGgodGhpcylcblx0XHRyZXR1cm4gbXNNYXAoLi4uZmxhdE1hcChyYW5nZSgwLCBsZW5ndGgpLCBpID0+XG5cdFx0XHRbIGlkQ2FjaGVkKGBfayR7aX1gKSwgaWRDYWNoZWQoYF92JHtpfWApIF0pKVxuXHR9LFxuXHRNZW1iZXIoKSB7XG5cdFx0cmV0dXJuIG1lbWJlcih0MCh0aGlzLm9iamVjdCksIHRoaXMubmFtZSlcblx0fSxcblx0TW9kdWxlKCkgeyByZXR1cm4gdHJhbnNwaWxlTW9kdWxlKHRoaXMsIGN4KSB9LFxuXHQvLyBUT0RPOkVTNiBVc2UgYGV4cG9ydCBkZWZhdWx0YFxuXHRNb2R1bGVEZWZhdWx0RXhwb3J0KCkge1xuXHRcdGNvbnN0IG0gPSBtZW1iZXIoSWRFeHBvcnRzLCAnZGVmYXVsdCcpXG5cdFx0cmV0dXJuIEFzc2lnbm1lbnRFeHByZXNzaW9uKCc9JywgbSwgdDAodGhpcy52YWx1ZSkpXG5cdH0sXG5cdFF1b3RlKCkge1xuXHRcdC8vIFRPRE86RVM2IHVzZSB0ZW1wbGF0ZSBzdHJpbmdzXG5cdFx0Y29uc3QgcGFydDAgPSB0aGlzLnBhcnRzWzBdXG5cdFx0Y29uc3QgWyBmaXJzdCwgcmVzdFBhcnRzIF0gPVxuXHRcdFx0dHlwZW9mIHBhcnQwID09PSAnc3RyaW5nJyA/XG5cdFx0XHRcdFsgTGl0ZXJhbChwYXJ0MCksIHRhaWwodGhpcy5wYXJ0cykgXSA6XG5cdFx0XHRcdFsgTGl0RW1wdHlTdHJpbmcsIHRoaXMucGFydHMgXVxuXHRcdHJldHVybiByZXN0UGFydHMucmVkdWNlKFxuXHRcdFx0KGV4LCBfKSA9PlxuXHRcdFx0XHRiaW5hcnlFeHByZXNzaW9uUGx1cyhleCwgdHlwZW9mIF8gPT09ICdzdHJpbmcnID8gTGl0ZXJhbChfKSA6IG1zU2hvdyh0MChfKSkpLFxuXHRcdFx0Zmlyc3QpXG5cdH0sXG5cdFNwZWNpYWwoKSB7XG5cdFx0Ly8gTWFrZSBuZXcgb2JqZWN0cyBiZWNhdXNlIHdlIHdpbGwgYXNzaWduIGBsb2NgIHRvIHRoZW0uXG5cdFx0c3dpdGNoICh0aGlzLmtpbmQpIHtcblx0XHRcdGNhc2UgU1BfQ29udGFpbnM6IHJldHVybiBtZW1iZXIoSWRNcywgJ2NvbnRhaW5zJylcblx0XHRcdGNhc2UgU1BfRGVidWdnZXI6IHJldHVybiBEZWJ1Z2dlclN0YXRlbWVudCgpXG5cdFx0XHRjYXNlIFNQX0ZhbHNlOiByZXR1cm4gTGl0ZXJhbChmYWxzZSlcblx0XHRcdGNhc2UgU1BfU3ViOiByZXR1cm4gbWVtYmVyKElkTXMsICdzdWInKVxuXHRcdFx0Y2FzZSBTUF9UaGlzOiByZXR1cm4gXHRUaGlzRXhwcmVzc2lvbigpXG5cdFx0XHRjYXNlIFNQX1RoaXNNb2R1bGVEaXJlY3Rvcnk6IHJldHVybiBJZGVudGlmaWVyKCdfX2Rpcm5hbWUnKVxuXHRcdFx0Y2FzZSBTUF9UcnVlOiByZXR1cm4gTGl0ZXJhbCh0cnVlKVxuXHRcdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKHRoaXMua2luZClcblx0XHR9XG5cdH0sXG5cdFNwbGF0KCkgeyBjeC5mYWlsKHRoaXMubG9jLCAnU3BsYXQgbXVzdCBhcHBlYXIgYXMgYXJndW1lbnQgdG8gYSBjYWxsLicpIH0sXG5cdFlpZWxkKCkgeyByZXR1cm4geWllbGRFeHByZXNzaW9uTm9EZWxlZ2F0ZSh0MCh0aGlzLnlpZWxkZWQpKSB9LFxuXHRZaWVsZFRvKCkgeyByZXR1cm4geWllbGRFeHByZXNzaW9uRGVsZWdhdGUodDAodGhpcy55aWVsZGVkVG8pKSB9XG59KVxuXG5jb25zdFxuXHRhcnJheUV4dHJhY3QgPSBsb2NhbHMgPT5cblx0XHR2YXJpYWJsZURlY2xhcmF0aW9uQ29uc3QobG9jYWxzLm1hcCgobCwgaW5kZXgpID0+XG5cdFx0XHRWYXJpYWJsZURlY2xhcmF0b3IoXG5cdFx0XHRcdGlkRm9yRGVjbGFyZUNhY2hlZChsKSxcblx0XHRcdFx0bWVtYmVyRXhwcmVzc2lvbihFeHRyYWN0VmFyLCBMaXRlcmFsKGluZGV4KSkpKSksXG5cblx0YmxvY2tXcmFwID0gKF8sIGJsb2NrKSA9PiB7XG5cdFx0Y29uc3QgaW52b2tlID0gY2FsbEV4cHJlc3Npb25UaHVuayhmdW5jdGlvbkV4cHJlc3Npb25UaHVuayhibG9jaywgaXNJbkdlbmVyYXRvcikpXG5cdFx0cmV0dXJuIGlzSW5HZW5lcmF0b3IgPyB5aWVsZEV4cHJlc3Npb25EZWxlZ2F0ZShpbnZva2UpIDogaW52b2tlXG5cdH0sXG5cblx0Y2FzZUJvZHkgPSAocGFydHMsIG9wRWxzZSkgPT4ge1xuXHRcdGxldCBhY2MgPSBpZkVsc2Uob3BFbHNlLCB0MCwgKCkgPT4gdGhyb3dFcnJvcignTm8gYnJhbmNoIG9mIGBjYXNlYCBtYXRjaGVzLicpKVxuXHRcdGZvciAobGV0IGkgPSBwYXJ0cy5sZW5ndGggLSAxOyBpID49IDA7IGkgPSBpIC0gMSlcblx0XHRcdGFjYyA9IHQxKHBhcnRzW2ldLCBhY2MpXG5cdFx0cmV0dXJuIGFjY1xuXHR9LFxuXG5cdGxvb3BJZCA9IGxvb3AgPT4gaWRDYWNoZWQoYGxvb3Ake2xvb3AubG9jLnN0YXJ0LmxpbmV9YClcbiJdLCJzb3VyY2VSb290IjoiL3NyYyJ9