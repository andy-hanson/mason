if (typeof define !== 'function') var define = require('amdefine')(module);define(['exports', 'esast/dist/ast', 'esast/dist/util', 'esast/dist/specialize', '../../Expression', '../U/Bag', '../U/Op', '../U/util', './esast-util', './transpileObj', './transpileModule', './util'], function (exports, _esastDistAst, _esastDistUtil, _esastDistSpecialize, _Expression, _UBag, _UOp, _UUtil, _esastUtil, _transpileObj, _transpileModule, _util) {
	'use strict';

	Object.defineProperty(exports, '__esModule', {
		value: true
	});
	exports.default = transpile;

	function _interopRequire(obj) { return obj && obj.__esModule ? obj['default'] : obj; }

	function _slicedToArray(arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }

	function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }

	var _transpileModule2 = _interopRequire(_transpileModule);

	const ExtractVar = _esastDistAst.Identifier('_$');

	let cx, vr, isInGenerator;

	function transpile(_cx, e, _vr) {
		cx = _cx;
		vr = _vr;
		isInGenerator = false;
		const res = t0(e);
		// Release for garbage collection
		cx = vr = undefined;
		return res;
	}

	const t0 = function (expr) {
		const ast = expr.transpileSubtree();
		ast.loc = expr.loc;
		return ast;
	};
	exports.t0 = t0;
	const t1 = function (expr, arg) {
		const ast = expr.transpileSubtree(arg);
		ast.loc = expr.loc;
		return ast;
	};
	const t3 = function (expr, arg, arg2, arg3) {
		const ast = expr.transpileSubtree(arg, arg2, arg3);
		ast.loc = expr.loc;
		return ast;
	};
	exports.t3 = t3;
	const tm = function (expr) {
		const ast = expr.transpileSubtree();
		if (!(ast instanceof Array))
			// Debug may produce multiple statements.
			ast.loc = expr.loc;
		return ast;
	};

	const toStatements = function (_) {
		return _ instanceof Array ? _.map(_esastDistUtil.toStatement) : [_esastDistUtil.toStatement(_)];
	};

	function transpileBlock(lead, opResDeclare, opOut) {
		var _this = this;

		if (lead === undefined) lead = [];
		if (opResDeclare === undefined) opResDeclare = opOut = _UOp.None;
		const body = _UBag.flatMap(this.lines, function (line) {
			return toStatements(tm(line));
		});
		const isVal = this instanceof _Expression.BlockVal;
		const fin = _UOp.ifElse(opResDeclare, function (rd) {
			_UUtil.assert(isVal);
			const returned = _util.maybeWrapInCheckContains(cx, t0(_this.returned), rd.opType, 'res');
			return _UOp.ifElse(opOut, function (o) {
				return [_esastUtil.declare(rd, returned)].concat(o, [_util.ReturnRes]);
			}, function () {
				return [_esastDistAst.ReturnStatement(returned)];
			});
		}, function () {
			return opOut.concat(_UOp.opIf(isVal, function () {
				return _esastDistAst.ReturnStatement(t0(_this.returned));
			}));
		});
		return _esastDistAst.BlockStatement(lead.concat(body, fin));
	}

	function casePart(alternate) {
		if (this.test instanceof _Expression.Pattern) {
			const decl = _esastDistSpecialize.variableDeclarationConst([_esastDistAst.VariableDeclarator(ExtractVar, _util.msExtract(t0(this.test.type), t0(this.test.patterned)))]);
			const test = _esastUtil.binaryExpressionNotEqual(ExtractVar, _esastDistAst.Literal(null));
			const ext = arrayExtract(this.test.locals);
			const res = t3(this.result, [ext]);
			return _esastDistAst.BlockStatement([decl, _esastDistAst.IfStatement(test, res, alternate)]);
		} else {
			const checkedTest = cx.opts.includeCaseChecks() ? _util.msBool(t0(this.test)) : t0(this.test);
			// alternate written to by `caseBody`.
			return _esastDistAst.IfStatement(checkedTest, t0(this.result), alternate);
		}
	}

	_UUtil.implementMany(_Expression, 'transpileSubtree', {
		Assign: function () {
			return _esastDistSpecialize.variableDeclarationConst([_util.makeDeclarator(cx, this.loc, this.assignee, this.k, t0(this.value))]);
		},
		// TODO:ES6 Just use native destructuring assign
		AssignDestructure: function () {
			return _esastDistSpecialize.variableDeclarationConst(_util.makeDestructureDeclarators(cx, this.loc, this.assignees, this.isLazy, t0(this.value), this.k, false));
		},
		BlockDo: transpileBlock,
		BlockVal: transpileBlock,
		BlockWrap: function () {
			return blockWrap(this, t0(this.block));
		},
		Call: function () {
			const anySplat = this.args.some(function (arg) {
				return arg instanceof _Expression.Splat;
			});
			if (anySplat) {
				const args = this.args.map(function (arg) {
					return arg instanceof _Expression.Splat ? _util.msArr(t0(arg.splatted)) : t0(arg);
				});
				return _esastDistAst.CallExpression(_util.IdFunctionApplyCall, [t0(this.called), _util.LitNull, _esastDistAst.CallExpression(_esastDistUtil.member(_util.LitEmptyArray, 'concat'), args)]);
			} else return _esastDistAst.CallExpression(t0(this.called), this.args.map(t0));
		},
		CaseDo: function () {
			const body = caseBody(this.parts, this.opElse);
			return _UOp.ifElse(this.opCased, function (cased) {
				return _esastDistAst.BlockStatement([t0(cased), body]);
			}, function () {
				return body;
			});
		},
		CaseVal: function () {
			const body = caseBody(this.parts, this.opElse);
			const block = _UOp.ifElse(this.opCased, function (cased) {
				return [t0(cased), body];
			}, function () {
				return [body];
			});
			return blockWrap(this, _esastDistAst.BlockStatement(block));
		},
		CaseDoPart: casePart,
		CaseValPart: casePart,
		// TODO: includeInoutChecks is misnamed
		Debug: function () {
			return cx.opts.includeInoutChecks() ? _UBag.flatMap(this.lines, function (line) {
				return toStatements(t0(line));
			}) : [];
		},
		ObjReturn: function () {
			return _transpileObj.transpileObjReturn(this, cx);
		},
		ObjSimple: function () {
			return _transpileObj.transpileObjSimple(this, cx);
		},
		EndLoop: function () {
			return _esastDistAst.BreakStatement(loopId(vr.endLoopToLoop.get(this)));
		},
		Fun: function () {
			const oldInGenerator = isInGenerator;
			isInGenerator = this.isGenerator;

			// TODO:ES6 use `...`
			const nArgs = _esastDistAst.Literal(this.args.length);
			const opDeclareRest = this.opRestArg.map(function (rest) {
				return _esastUtil.declare(rest, _esastDistAst.CallExpression(_util.IdArraySliceCall, [_util.IdArguments, nArgs]));
			});
			const argChecks = _UBag.flatMap(this.args, function (arg) {
				return _util.opLocalCheck(cx, arg, arg.isLazy);
			});
			const _in = _UBag.flatMap(this.opIn, function (i) {
				return toStatements(t0(i));
			});
			const lead = opDeclareRest.concat(argChecks, _in);

			const _out = _UBag.flatMap(this.opOut, function (o) {
				return toStatements(t0(o));
			});
			const body = t3(this.block, lead, this.opResDeclare, _out);
			const args = this.args.map(t0);
			const res = _esastDistSpecialize.functionExpressionPlain(args, body, this.isGenerator);

			isInGenerator = oldInGenerator;
			return res;
		},
		Lazy: function () {
			return _util.lazyWrap(t0(this.value));
		},
		ListReturn: function () {
			return _esastDistAst.ArrayExpression(_UBag.range(0, this.length).map(function (i) {
				return _esastDistUtil.idCached('_' + i);
			}));
		},
		ListSimple: function () {
			return _esastDistAst.ArrayExpression(this.parts.map(t0));
		},
		ListEntry: function () {
			return _esastUtil.declareSpecial('_' + this.index, t0(this.value));
		},
		NumberLiteral: function () {
			// Negative numbers are not part of ES spec.
			// http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.3
			const lit = _esastDistAst.Literal(Math.abs(this.value));
			return _UUtil.isPositive(this.value) ? lit : _esastUtil.unaryExpressionNegate(lit);
		},
		GlobalAccess: function () {
			return _esastDistAst.Identifier(this.name);
		},
		LocalAccess: function () {
			return _util.accessLocal(this, vr);
		},
		LocalDeclare: function () {
			return _esastUtil.idForDeclareCached(this);
		},
		// TODO: Don't always label!
		Loop: function () {
			return _esastDistAst.LabeledStatement(loopId(this), _esastUtil.whileStatementInfinite(t0(this.block)));
		},
		MapEntry: function () {
			const k = '_k' + this.index;
			const v = '_v' + this.index;
			return _esastDistSpecialize.variableDeclarationConst([_esastDistAst.VariableDeclarator(_esastDistUtil.idCached(k), t0(this.key)), _esastDistAst.VariableDeclarator(_esastDistUtil.idCached(v), t0(this.val))]);
		},
		MapReturn: function () {
			return _util.msMap.apply(undefined, _toConsumableArray(_UBag.flatMap(_UBag.range(0, this.length), function (i) {
				return [_esastDistUtil.idCached('_k' + i), _esastDistUtil.idCached('_v' + i)];
			})));
		},
		Member: function () {
			return _esastDistUtil.member(t0(this.object), this.name);
		},
		Module: function () {
			return _transpileModule2(this, cx);
		},
		// TODO:ES6 Use `export default`
		ModuleDefaultExport: function () {
			const m = _esastDistUtil.member(_util.IdExports, 'default');
			return _esastDistAst.AssignmentExpression('=', m, t0(this.value));
		},
		Quote: function () {
			// TODO:ES6 use template strings
			const part0 = this.parts[0];

			var _ref = typeof part0 === 'string' ? [_esastDistAst.Literal(part0), _UBag.tail(this.parts)] : [_util.LitEmptyString, this.parts];

			var _ref2 = _slicedToArray(_ref, 2);

			const first = _ref2[0];
			const restParts = _ref2[1];

			return restParts.reduce(function (ex, _) {
				return _esastUtil.binaryExpressionPlus(ex, typeof _ === 'string' ? _esastDistAst.Literal(_) : _util.msShow(t0(_)));
			}, first);
		},
		Special: function () {
			// Make new objects because we will assign `loc` to them.
			switch (this.k) {
				case _Expression.SP_Contains:
					return _esastDistUtil.member(_util.IdMs, 'contains');
				case _Expression.SP_Debugger:
					return _esastDistAst.DebuggerStatement();
				case _Expression.SP_Sub:
					return _esastDistUtil.member(_util.IdMs, 'sub');
				case _Expression.SP_This:
					return _esastDistAst.ThisExpression();
				case _Expression.SP_ThisModuleDirectory:
					return _esastDistAst.Identifier('__dirname');
				default:
					throw new Error(this.k);
			}
		},
		Splat: function () {
			cx.fail(this.loc, 'Splat must appear as argument to a call.');
		},
		Yield: function () {
			return _esastDistSpecialize.yieldExpressionNoDelegate(t0(this.yielded));
		},
		YieldTo: function () {
			return _esastDistSpecialize.yieldExpressionDelegate(t0(this.yieldedTo));
		}
	});

	const arrayExtract = function (locals) {
		return _esastDistSpecialize.variableDeclarationConst(locals.map(function (l, index) {
			return _esastDistAst.VariableDeclarator(_esastUtil.idForDeclareCached(l), _esastDistSpecialize.memberExpression(ExtractVar, _esastDistAst.Literal(index)));
		}));
	},
	      blockWrap = function (_, block) {
		const invoke = _esastDistSpecialize.callExpressionThunk(_esastDistSpecialize.functionExpressionThunk(block, isInGenerator));
		return isInGenerator ? _esastDistSpecialize.yieldExpressionDelegate(invoke) : invoke;
	},
	      caseBody = function (parts, opElse) {
		let acc = _UOp.ifElse(opElse, t0, function () {
			return _esastUtil.throwError('No branch of `case` matches.');
		});
		for (let i = parts.length - 1; i >= 0; i = i - 1) acc = t1(parts[i], acc);
		return acc;
	},
	      loopId = function (loop) {
		return _esastDistUtil.idCached('loop' + loop.loc.start.line);
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ldGEvY29tcGlsZS9wcml2YXRlL3RyYW5zcGlsZS90cmFuc3BpbGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O21CQThCd0IsU0FBUzs7Ozs7Ozs7OztBQUpqQyxPQUFNLFVBQVUsR0FBRyxjQXpCaUIsVUFBVSxDQXlCaEIsSUFBSSxDQUFDLENBQUE7O0FBRW5DLEtBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxhQUFhLENBQUE7O0FBRVYsVUFBUyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUU7QUFDOUMsSUFBRSxHQUFHLEdBQUcsQ0FBQTtBQUNSLElBQUUsR0FBRyxHQUFHLENBQUE7QUFDUixlQUFhLEdBQUcsS0FBSyxDQUFBO0FBQ3JCLFFBQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTs7QUFFakIsSUFBRSxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUE7QUFDbkIsU0FBTyxHQUFHLENBQUE7RUFDVjs7QUFFTSxPQUFNLEVBQUUsR0FBRyxVQUFBLElBQUksRUFBSTtBQUN6QixRQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQTtBQUNuQyxLQUFHLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUE7QUFDbEIsU0FBTyxHQUFHLENBQUE7RUFDVixDQUFBO1NBSlksRUFBRSxHQUFGLEVBQUU7QUFLZixPQUFNLEVBQUUsR0FBRyxVQUFDLElBQUksRUFBRSxHQUFHLEVBQUs7QUFDekIsUUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFBO0FBQ3RDLEtBQUcsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQTtBQUNsQixTQUFPLEdBQUcsQ0FBQTtFQUNWLENBQUE7QUFDTSxPQUFNLEVBQUUsR0FBRyxVQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBSztBQUM1QyxRQUFNLEdBQUcsR0FB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Q0FBQTtBQUN4QixTQUFPLEdBQUcsQ0FBQTtFQUNWO09BRUQsTUFBTSxHQUFHLFVBQUEsSUFBSTtTQUFJLGVBdFFULFFBQVEsVUFzUWlCLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBRztFQUFBLENBQUEiLCJmaWxlIjoibWV0YS9jb21waWxlL3ByaXZhdGUvdHJhbnNwaWxlL3RyYW5zcGlsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFycmF5RXhwcmVzc2lvbiwgQXNzaWdubWVudEV4cHJlc3Npb24sIEJsb2NrU3RhdGVtZW50LCBCcmVha1N0YXRlbWVudCxcblx0Q2FsbEV4cHJlc3Npb24sIERlYnVnZ2VyU3RhdGVtZW50LCBJZGVudGlmaWVyLCBJZlN0YXRlbWVudCwgTGFiZWxlZFN0YXRlbWVudCwgTGl0ZXJhbCxcblx0VGhpc0V4cHJlc3Npb24sIFZhcmlhYmxlRGVjbGFyYXRvciwgUmV0dXJuU3RhdGVtZW50IH0gZnJvbSAnZXNhc3QvZGlzdC9hc3QnXG5pbXBvcnQgeyBpZENhY2hlZCwgbWVtYmVyLCB0b1N0YXRlbWVudCB9IGZyb20gJ2VzYXN0L2Rpc3QvdXRpbCdcbmltcG9ydCB7IGNhbGxFeHByZXNzaW9uVGh1bmssIGZ1bmN0aW9uRXhwcmVzc2lvblBsYWluLCBmdW5jdGlvbkV4cHJlc3Npb25UaHVuaywgbWVtYmVyRXhwcmVzc2lvbixcblx0dmFyaWFibGVEZWNsYXJhdGlvbkNvbnN0LCB5aWVsZEV4cHJlc3Npb25EZWxlZ2F0ZSwgeWllbGRFeHByZXNzaW9uTm9EZWxlZ2F0ZVxuXHR9IGZyb20gJ2VzYXN0L2Rpc3Qvc3BlY2lhbGl6ZSdcbmltcG9ydCAqIGFzIEVFeHBvcnRzIGZyb20gJy4uLy4uL0V4cHJlc3Npb24nXG5pbXBvcnQgeyBCbG9ja1ZhbCwgUGF0dGVybiwgU3BsYXQsXG5cdFNQX0NvbnRhaW5zLCBTUF9EZWJ1Z2dlciwgU1BfU3ViLCBTUF9UaGlzLCBTUF9UaGlzTW9kdWxlRGlyZWN0b3J5XG5cdH0gZnJvbSAnLi4vLi4vRXhwcmVzc2lvbidcbmltcG9ydCB7IGZsYXRNYXAsIHJhbmdlLCB0YWlsIH0gZnJvbSAnLi4vVS9CYWcnXG5pbXBvcnQgeyBpZkVsc2UsIE5vbmUsIG9wSWYgfSBmcm9tICcuLi9VL09wJ1xuaW1wb3J0IHsgYXNzZXJ0LCBpbXBsZW1lbnRNYW55LCBpc1Bvc2l0aXZlIH0gZnJvbSAnLi4vVS91dGlsJ1xuaW1wb3J0IHsgYmluYXJ5RXhwcmVzc2lvblBsdXMsIGJpbmFyeUV4cHJlc3Npb25Ob3RFcXVhbCwgZGVjbGFyZSwgZGVjbGFyZVNwZWNpYWwsXG5cdGlkRm9yRGVjbGFyZUNhY2hlZCwgdGhyb3dFcnJvciwgdW5hcnlFeHByZXNzaW9uTmVnYXRlLCB3aGlsZVN0YXRlbWVudEluZmluaXRlXG5cdH0gZnJvbSAnLi9lc2FzdC11dGlsJ1xuaW1wb3J0IHsgdHJhbnNwaWxlT2JqUmV0dXJuLCB0cmFuc3BpbGVPYmpTaW1wbGUgfSBmcm9tICcuL3RyYW5zcGlsZU9iaidcbmltcG9ydCB0cmFuc3BpbGVNb2R1bGUgZnJvbSAnLi90cmFuc3BpbGVNb2R1bGUnXG5pbXBvcnQge1xuXHRJZEFyZ3VtZW50cywgSWRBcnJheVNsaWNlQ2FsbCwgSWRFeHBvcnRzLCBJZEZ1bmN0aW9uQXBwbHlDYWxsLCBJZE1zLFxuXHRMaXRFbXB0eUFycmF5LCBMaXRFbXB0eVN0cmluZywgTGl0TnVsbCwgUmV0dXJuUmVzLFxuXHRhY2Nlc3NMb2NhbCwgbGF6eVdyYXAsIG1ha2VEZWNsYXJhdG9yLCBtYWtlRGVzdHJ1Y3R1cmVEZWNsYXJhdG9ycyxcblx0bWF5YmVXcmFwSW5DaGVja0NvbnRhaW5zLCBvcExvY2FsQ2hlY2ssXG5cdG1zQXJyLCBtc0Jvb2wsIG1zRXh0cmFjdCwgbXNNYXAsIG1zU2hvdyB9IGZyb20gJy4vdXRpbCdcblxuY29uc3QgRXh0cmFjdFZhciA9IElkZW50aWZpZXIoJ18kJylcblxubGV0IGN4LCB2ciwgaXNJbkdlbmVyYXRvclxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmFuc3BpbGUoX2N4LCBlLCBfdnIpIHtcblx0Y3ggPSBfY3hcblx0dnIgPSBfdnJcblx0aXNJbkdlbmVyYXRvciA9IGZhbHNlXG5cdGNvbnN0IHJlcyA9IHQwKGUpXG5cdC8vIFJlbGVhc2UgZm9yIGdhcmJhZ2UgY29sbGVjdGlvblxuXHRjeCA9IHZyID0gdW5kZWZpbmVkXG5cdHJldHVybiByZXNcbn1cblxuZXhwb3J0IGNvbnN0IHQwID0gZXhwciA9PiB7XG5cdGNvbnN0IGFzdCA9IGV4cHIudHJhbnNwaWxlU3VidHJlZSgpXG5cdGFzdC5sb2MgPSBleHByLmxvY1xuXHRyZXR1cm4gYXN0XG59XG5jb25zdCB0MSA9IChleHByLCBhcmcpID0+IHtcblx0Y29uc3QgYXN0ID0gZXhwci50cmFuc3BpbGVTdWJ0cmVlKGFyZylcblx0YXN0LmxvYyA9IGV4cHIubG9jXG5cdHJldHVybiBhc3Rcbn1cbmV4cG9ydCBjb25zdCB0MyA9IChleHByLCBhcmcsIGFyZzIsIGFyZzMpID0+IHtcblx0Y29uc3QgYXN0ID0gZXhwci50cmFuc3BpbGVTdWJ0cmVlKGFyZywgYXJnMiwgYXJnMylcblx0YXN0LmxvYyA9IGV4cHIubG9jXG5cdHJldHVybiBhc3Rcbn1cbmNvbnN0IHRtID0gZXhwciA9PiB7XG5cdGNvbnN0IGFzdCA9IGV4cHIudHJhbnNwaWxlU3VidHJlZSgpXG5cdGlmICghKGFzdCBpbnN0YW5jZW9mIEFycmF5KSlcblx0XHQvLyBEZWJ1ZyBtYXkgcHJvZHVjZSBtdWx0aXBsZSBzdGF0ZW1lbnRzLlxuXHRcdGFzdC5sb2MgPSBleHByLmxvY1xuXHRyZXR1cm4gYXN0XG59XG5cbmNvbnN0IHRvU3RhdGVtZW50cyA9IF8gPT4gXyBpbnN0YW5jZW9mIEFycmF5ID8gXy5tYXAodG9TdGF0ZW1lbnQpIDogWyB0b1N0YXRlbWVudChfKSBdXG5cbmZ1bmN0aW9uIHRyYW5zcGlsZUJsb2NrKGxlYWQsIG9wUmVzRGVjbGFyZSwgb3BPdXQpIHtcblx0aWYgKGxlYWQgPT09IHVuZGVmaW5lZClcblx0XHRsZWFkID0gW11cblx0aWYgKG9wUmVzRGVjbGFyZSA9PT0gdW5kZWZpbmVkKVxuXHRcdG9wUmVzRGVjbGFyZSA9IG9wT3V0ID0gTm9uZVxuXHRjb25zdCBib2R5ID0gZmxhdE1hcCh0aGlzLmxpbmVzLCBsaW5lID0+IHRvU3RhdGVtZW50cyh0bShsaW5lKSkpXG5cdGNvbnN0IGlzVmFsID0gdGhpcyBpbnN0YW5jZW9mIEJsb2NrVmFsXG5cdGNvbnN0IGZpbiA9IGlmRWxzZShvcFJlc0RlY2xhcmUsXG5cdFx0cmQgPT4ge1xuXHRcdFx0YXNzZXJ0KGlzVmFsKVxuXHRcdFx0Y29uc3QgcmV0dXJuZWQgPSBtYXliZVdyYXBJbkNoZWNrQ29udGFpbnMoY3gsIHQwKHRoaXMucmV0dXJuZWQpLCByZC5vcFR5cGUsICdyZXMnKVxuXHRcdFx0cmV0dXJuIGlmRWxzZShvcE91dCxcblx0XHRcdFx0byA9PiBbIGRlY2xhcmUocmQsIHJldHVybmVkKSBdLmNvbmNhdChvLCBbIFJldHVyblJlcyBdKSxcblx0XHRcdFx0KCkgPT4gWyBSZXR1cm5TdGF0ZW1lbnQocmV0dXJuZWQpIF0pXG5cdFx0fSxcblx0XHQoKSA9PiBvcE91dC5jb25jYXQob3BJZihpc1ZhbCwgKCkgPT4gUmV0dXJuU3RhdGVtZW50KHQwKHRoaXMucmV0dXJuZWQpKSkpKVxuXHRyZXR1cm4gQmxvY2tTdGF0ZW1lbnQobGVhZC5jb25jYXQoYm9keSwgZmluKSlcbn1cblxuZnVuY3Rpb24gY2FzZVBhcnQoYWx0ZXJuYXRlKSB7XG5cdGlmICh0aGlzLnRlc3QgaW5zdGFuY2VvZiBQYXR0ZXJuKSB7XG5cdFx0Y29uc3QgZGVjbCA9IHZhcmlhYmxlRGVjbGFyYXRpb25Db25zdChbXG5cdFx0XHRWYXJpYWJsZURlY2xhcmF0b3IoXG5cdFx0XHRcdEV4dHJhY3RWYXIsXG5cdFx0XHRcdG1zRXh0cmFjdCh0MCh0aGlzLnRlc3QudHlwZSksIHQwKHRoaXMudGVzdC5wYXR0ZXJuZWQpKSlcblx0XHRcdF0pXG5cdFx0Y29uc3QgdGVzdCA9IGJpbmFyeUV4cHJlc3Npb25Ob3RFcXVhbChFeHRyYWN0VmFyLCBMaXRlcmFsKG51bGwpKVxuXHRcdGNvbnN0IGV4dCA9IGFycmF5RXh0cmFjdCh0aGlzLnRlc3QubG9jYWxzKVxuXHRcdGNvbnN0IHJlcyA9IHQzKHRoaXMucmVzdWx0LCBbIGV4dCBdKVxuXHRcdHJldHVybiBCbG9ja1N0YXRlbWVudChbIGRlY2wsIElmU3RhdGVtZW50KHRlc3QsIHJlcywgYWx0ZXJuYXRlKSBdKVxuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IGNoZWNrZWRUZXN0ID0gY3gub3B0cy5pbmNsdWRlQ2FzZUNoZWNrcygpID8gbXNCb29sKHQwKHRoaXMudGVzdCkpIDogdDAodGhpcy50ZXN0KVxuXHRcdC8vIGFsdGVybmF0ZSB3cml0dGVuIHRvIGJ5IGBjYXNlQm9keWAuXG5cdFx0cmV0dXJuIElmU3RhdGVtZW50KGNoZWNrZWRUZXN0LCB0MCh0aGlzLnJlc3VsdCksIGFsdGVybmF0ZSlcblx0fVxufVxuXG5pbXBsZW1lbnRNYW55KEVFeHBvcnRzLCAndHJhbnNwaWxlU3VidHJlZScsIHtcblx0QXNzaWduKCkge1xuXHRcdHJldHVybiB2YXJpYWJsZURlY2xhcmF0aW9uQ29uc3QoW1xuXHRcdFx0bWFrZURlY2xhcmF0b3IoY3gsIHRoaXMubG9jLCB0aGlzLmFzc2lnbmVlLCB0aGlzLmssIHQwKHRoaXMudmFsdWUpKSBdKVxuXHR9LFxuXHQvLyBUT0RPOkVTNiBKdXN0IHVzZSBuYXRpdmUgZGVzdHJ1Y3R1cmluZyBhc3NpZ25cblx0QXNzaWduRGVzdHJ1Y3R1cmUoKSB7XG5cdFx0cmV0dXJuIHZhcmlhYmxlRGVjbGFyYXRpb25Db25zdChcblx0XHRcdG1ha2VEZXN0cnVjdHVyZURlY2xhcmF0b3JzKFxuXHRcdFx0XHRjeCxcblx0XHRcdFx0dGhpcy5sb2MsXG5cdFx0XHRcdHRoaXMuYXNzaWduZWVzLFxuXHRcdFx0XHR0aGlzLmlzTGF6eSxcblx0XHRcdFx0dDAodGhpcy52YWx1ZSksXG5cdFx0XHRcdHRoaXMuayxcblx0XHRcdFx0ZmFsc2UpKVxuXHR9LFxuXHRCbG9ja0RvOiB0cmFuc3BpbGVCbG9jayxcblx0QmxvY2tWYWw6IHRyYW5zcGlsZUJsb2NrLFxuXHRCbG9ja1dyYXAoKSB7IHJldHVybiBibG9ja1dyYXAodGhpcywgdDAodGhpcy5ibG9jaykpIH0sXG5cdENhbGwoKSB7XG5cdFx0Y29uc3QgYW55U3BsYXQgPSB0aGlzLmFyZ3Muc29tZShhcmcgPT4gYXJnIGluc3RhbmNlb2YgU3BsYXQpXG5cdFx0aWYgKGFueVNwbGF0KSB7XG5cdFx0XHRjb25zdCBhcmdzID0gdGhpcy5hcmdzLm1hcChhcmcgPT5cblx0XHRcdFx0YXJnIGluc3RhbmNlb2YgU3BsYXQgP1xuXHRcdFx0XHRcdG1zQXJyKHQwKGFyZy5zcGxhdHRlZCkpIDpcblx0XHRcdFx0XHR0MChhcmcpKVxuXHRcdFx0cmV0dXJuIENhbGxFeHByZXNzaW9uKElkRnVuY3Rpb25BcHBseUNhbGwsIFtcblx0XHRcdFx0dDAodGhpcy5jYWxsZWQpLFxuXHRcdFx0XHRMaXROdWxsLFxuXHRcdFx0XHRDYWxsRXhwcmVzc2lvbihtZW1iZXIoTGl0RW1wdHlBcnJheSwgJ2NvbmNhdCcpLCBhcmdzKV0pXG5cdFx0fVxuXHRcdGVsc2UgcmV0dXJuIENhbGxFeHByZXNzaW9uKHQwKHRoaXMuY2FsbGVkKSwgdGhpcy5hcmdzLm1hcCh0MCkpXG5cdH0sXG5cdENhc2VEbygpIHtcblx0XHRjb25zdCBib2R5ID0gY2FzZUJvZHkodGhpcy5wYXJ0cywgdGhpcy5vcEVsc2UpXG5cdFx0cmV0dXJuIGlmRWxzZSh0aGlzLm9wQ2FzZWQsXG5cdFx0XHRjYXNlZCA9PiBCbG9ja1N0YXRlbWVudChbIHQwKGNhc2VkKSwgYm9keSBdKSxcblx0XHRcdCgpID0+IGJvZHkpXG5cdH0sXG5cdENhc2VWYWwoKSB7XG5cdFx0Y29uc3QgYm9keSA9IGNhc2VCb2R5KHRoaXMucGFydHMsIHRoaXMub3BFbHNlKVxuXHRcdGNvbnN0IGJsb2NrID0gaWZFbHNlKHRoaXMub3BDYXNlZCwgY2FzZWQgPT4gWyB0MChjYXNlZCksIGJvZHkgXSwgKCkgPT4gWyBib2R5IF0pXG5cdFx0cmV0dXJuIGJsb2NrV3JhcCh0aGlzLCBCbG9ja1N0YXRlbWVudChibG9jaykpXG5cdH0sXG5cdENhc2VEb1BhcnQ6IGNhc2VQYXJ0LFxuXHRDYXNlVmFsUGFydDogY2FzZVBhcnQsXG5cdC8vIFRPRE86IGluY2x1ZGVJbm91dENoZWNrcyBpcyBtaXNuYW1lZFxuXHREZWJ1ZygpIHtcblx0XHRyZXR1cm4gY3gub3B0cy5pbmNsdWRlSW5vdXRDaGVja3MoKSA/XG5cdFx0XHRmbGF0TWFwKHRoaXMubGluZXMsIGxpbmUgPT4gdG9TdGF0ZW1lbnRzKHQwKGxpbmUpKSkgOlxuXHRcdFx0WyBdXG5cdH0sXG5cdE9ialJldHVybigpIHsgcmV0dXJuIHRyYW5zcGlsZU9ialJldHVybih0aGlzLCBjeCkgfSxcblx0T2JqU2ltcGxlKCkgeyByZXR1cm4gdHJhbnNwaWxlT2JqU2ltcGxlKHRoaXMsIGN4KSB9LFxuXHRFbmRMb29wKCkgeyByZXR1cm4gQnJlYWtTdGF0ZW1lbnQobG9vcElkKHZyLmVuZExvb3BUb0xvb3AuZ2V0KHRoaXMpKSkgfSxcblx0RnVuKCkge1xuXHRcdGNvbnN0IG9sZEluR2VuZXJhdG9yID0gaXNJbkdlbmVyYXRvclxuXHRcdGlzSW5HZW5lcmF0b3IgPSB0aGlzLmlzR2VuZXJhdG9yXG5cblx0XHQvLyBUT0RPOkVTNiB1c2UgYC4uLmBcblx0XHRjb25zdCBuQXJncyA9IExpdGVyYWwodGhpcy5hcmdzLmxlbmd0aClcblx0XHRjb25zdCBvcERlY2xhcmVSZXN0ID0gdGhpcy5vcFJlc3RBcmcubWFwKHJlc3QgPT5cblx0XHRcdGRlY2xhcmUocmVzdCwgQ2FsbEV4cHJlc3Npb24oSWRBcnJheVNsaWNlQ2FsbCwgW0lkQXJndW1lbnRzLCBuQXJnc10pKSlcblx0XHRjb25zdCBhcmdDaGVja3MgPSBmbGF0TWFwKHRoaXMuYXJncywgYXJnID0+IG9wTG9jYWxDaGVjayhjeCwgYXJnLCBhcmcuaXNMYXp5KSlcblx0XHRjb25zdCBfaW4gPSBmbGF0TWFwKHRoaXMub3BJbiwgaSA9PiB0b1N0YXRlbWVudHModDAoaSkpKVxuXHRcdGNvbnN0IGxlYWQgPSBvcERlY2xhcmVSZXN0LmNvbmNhdChhcmdDaGVja3MsIF9pbilcblxuXHRcdGNvbnN0IF9vdXQgPSBmbGF0TWFwKHRoaXMub3BPdXQsIG8gPT4gdG9TdGF0ZW1lbnRzKHQwKG8pKSlcblx0XHRjb25zdCBib2R5ID0gdDModGhpcy5ibG9jaywgbGVhZCwgdGhpcy5vcFJlc0RlY2xhcmUsIF9vdXQpXG5cdFx0Y29uc3QgYXJncyA9IHRoaXMuYXJncy5tYXAodDApXG5cdFx0Y29uc3QgcmVzID0gZnVuY3Rpb25FeHByZXNzaW9uUGxhaW4oYXJncywgYm9keSwgdGhpcy5pc0dlbmVyYXRvcilcblxuXHRcdGlzSW5HZW5lcmF0b3IgPSBvbGRJbkdlbmVyYXRvclxuXHRcdHJldHVybiByZXNcblx0fSxcblx0TGF6eSgpIHsgcmV0dXJuIGxhenlXcmFwKHQwKHRoaXMudmFsdWUpKSB9LFxuXHRMaXN0UmV0dXJuKCkge1xuXHRcdHJldHVybiBBcnJheUV4cHJlc3Npb24ocmFuZ2UoMCwgdGhpcy5sZW5ndGgpLm1hcChpID0+IGlkQ2FjaGVkKGBfJHtpfWApKSlcblx0fSxcblx0TGlzdFNpbXBsZSgpIHsgcmV0dXJuIEFycmF5RXhwcmVzc2lvbih0aGlzLnBhcnRzLm1hcCh0MCkpIH0sXG5cdExpc3RFbnRyeSgpIHsgcmV0dXJuIGRlY2xhcmVTcGVjaWFsKGBfJHt0aGlzLmluZGV4fWAsIHQwKHRoaXMudmFsdWUpKSB9LFxuXHROdW1iZXJMaXRlcmFsKCkge1xuXHRcdC8vIE5lZ2F0aXZlIG51bWJlcnMgYXJlIG5vdCBwYXJ0IG9mIEVTIHNwZWMuXG5cdFx0Ly8gaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTcuOC4zXG5cdFx0Y29uc3QgbGl0ID0gTGl0ZXJhbChNYXRoLmFicyh0aGlzLnZhbHVlKSlcblx0XHRyZXR1cm4gaXNQb3NpdGl2ZSh0aGlzLnZhbHVlKSA/IGxpdCA6IHVuYXJ5RXhwcmVzc2lvbk5lZ2F0ZShsaXQpXG5cdH0sXG5cdEdsb2JhbEFjY2VzcygpIHsgcmV0dXJuIElkZW50aWZpZXIodGhpcy5uYW1lKSB9LFxuXHRMb2NhbEFjY2VzcygpIHsgcmV0dXJuIGFjY2Vzc0xvY2FsKHRoaXMsIHZyKSB9LFxuXHRMb2NhbERlY2xhcmUoKSB7IHJldHVybiBpZEZvckRlY2xhcmVDYWNoZWQodGhpcykgfSxcblx0Ly8gVE9ETzogRG9uJ3QgYWx3YXlzIGxhYmVsIVxuXHRMb29wKCkge1xuXHRcdHJldHVybiBMYWJlbGVkU3RhdGVtZW50KGxvb3BJZCh0aGlzKSwgd2hpbGVTdGF0ZW1lbnRJbmZpbml0ZSh0MCh0aGlzLmJsb2NrKSkpXG5cdH0sXG5cdE1hcEVudHJ5KCkge1xuXHRcdGNvbnN0IGsgPSBgX2ske3RoaXMuaW5kZXh9YFxuXHRcdGNvbnN0IHYgPSBgX3Yke3RoaXMuaW5kZXh9YFxuXHRcdHJldHVybiB2YXJpYWJsZURlY2xhcmF0aW9uQ29uc3QoW1xuXHRcdFx0VmFyaWFibGVEZWNsYXJhdG9yKGlkQ2FjaGVkKGspLCB0MCh0aGlzLmtleSkpLFxuXHRcdFx0VmFyaWFibGVEZWNsYXJhdG9yKGlkQ2FjaGVkKHYpLCB0MCh0aGlzLnZhbCkpXG5cdFx0XSlcblx0fSxcblx0TWFwUmV0dXJuKCkge1xuXHRcdHJldHVybiBtc01hcCguLi5mbGF0TWFwKHJhbmdlKDAsIHRoaXMubGVuZ3RoKSwgaSA9PlxuXHRcdFx0WyBpZENhY2hlZChgX2ske2l9YCksIGlkQ2FjaGVkKGBfdiR7aX1gKSBdKSlcblx0fSxcblx0TWVtYmVyKCkge1xuXHRcdHJldHVybiBtZW1iZXIodDAodGhpcy5vYmplY3QpLCB0aGlzLm5hbWUpXG5cdH0sXG5cdE1vZHVsZSgpIHsgcmV0dXJuIHRyYW5zcGlsZU1vZHVsZSh0aGlzLCBjeCkgfSxcblx0Ly8gVE9ETzpFUzYgVXNlIGBleHBvcnQgZGVmYXVsdGBcblx0TW9kdWxlRGVmYXVsdEV4cG9ydCgpIHtcblx0XHRjb25zdCBtID0gbWVtYmVyKElkRXhwb3J0cywgJ2RlZmF1bHQnKVxuXHRcdHJldHVybiBBc3NpZ25tZW50RXhwcmVzc2lvbignPScsIG0sIHQwKHRoaXMudmFsdWUpKVxuXHR9LFxuXHRRdW90ZSgpIHtcblx0XHQvLyBUT0RPOkVTNiB1c2UgdGVtcGxhdGUgc3RyaW5nc1xuXHRcdGNvbnN0IHBhcnQwID0gdGhpcy5wYXJ0c1swXVxuXHRcdGNvbnN0IFsgZmlyc3QsIHJlc3RQYXJ0cyBdID1cblx0XHRcdHR5cGVvZiBwYXJ0MCA9PT0gJ3N0cmluZycgP1xuXHRcdFx0XHRbIExpdGVyYWwocGFydDApLCB0YWlsKHRoaXMucGFydHMpIF0gOlxuXHRcdFx0XHRbIExpdEVtcHR5U3RyaW5nLCB0aGlzLnBhcnRzIF1cblx0XHRyZXR1cm4gcmVzdFBhcnRzLnJlZHVjZShcblx0XHRcdChleCwgXykgPT5cblx0XHRcdFx0YmluYXJ5RXhwcmVzc2lvblBsdXMoZXgsIHR5cGVvZiBfID09PSAnc3RyaW5nJyA/IExpdGVyYWwoXykgOiBtc1Nob3codDAoXykpKSxcblx0XHRcdGZpcnN0KVxuXHR9LFxuXHRTcGVjaWFsKCkge1xuXHRcdC8vIE1ha2UgbmV3IG9iamVjdHMgYmVjYXVzZSB3ZSB3aWxsIGFzc2lnbiBgbG9jYCB0byB0aGVtLlxuXHRcdHN3aXRjaCAodGhpcy5rKSB7XG5cdFx0XHRjYXNlIFNQX0NvbnRhaW5zOiByZXR1cm4gbWVtYmVyKElkTXMsICdjb250YWlucycpXG5cdFx0XHRjYXNlIFNQX0RlYnVnZ2VyOiByZXR1cm4gRGVidWdnZXJTdGF0ZW1lbnQoKVxuXHRcdFx0Y2FzZSBTUF9TdWI6IHJldHVybiBtZW1iZXIoSWRNcywgJ3N1YicpXG5cdFx0XHRjYXNlIFNQX1RoaXM6IHJldHVybiBcdFRoaXNFeHByZXNzaW9uKClcblx0XHRcdGNhc2UgU1BfVGhpc01vZHVsZURpcmVjdG9yeTogcmV0dXJuIElkZW50aWZpZXIoJ19fZGlybmFtZScpXG5cdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IodGhpcy5rKVxuXHRcdH1cblx0fSxcblx0U3BsYXQoKSB7IGN4LmZhaWwodGhpcy5sb2MsICdTcGxhdCBtdXN0IGFwcGVhciBhcyBhcmd1bWVudCB0byBhIGNhbGwuJykgfSxcblx0WWllbGQoKSB7IHJldHVybiB5aWVsZEV4cHJlc3Npb25Ob0RlbGVnYXRlKHQwKHRoaXMueWllbGRlZCkpIH0sXG5cdFlpZWxkVG8oKSB7IHJldHVybiB5aWVsZEV4cHJlc3Npb25EZWxlZ2F0ZSh0MCh0aGlzLnlpZWxkZWRUbykpIH1cbn0pXG5cbmNvbnN0XG5cdGFycmF5RXh0cmFjdCA9IGxvY2FscyA9PlxuXHRcdHZhcmlhYmxlRGVjbGFyYXRpb25Db25zdChsb2NhbHMubWFwKChsLCBpbmRleCkgPT5cblx0XHRcdFZhcmlhYmxlRGVjbGFyYXRvcihcblx0XHRcdFx0aWRGb3JEZWNsYXJlQ2FjaGVkKGwpLFxuXHRcdFx0XHRtZW1iZXJFeHByZXNzaW9uKEV4dHJhY3RWYXIsIExpdGVyYWwoaW5kZXgpKSkpKSxcblxuXHRibG9ja1dyYXAgPSAoXywgYmxvY2spID0+IHtcblx0XHRjb25zdCBpbnZva2UgPSBjYWxsRXhwcmVzc2lvblRodW5rKGZ1bmN0aW9uRXhwcmVzc2lvblRodW5rKGJsb2NrLCBpc0luR2VuZXJhdG9yKSlcblx0XHRyZXR1cm4gaXNJbkdlbmVyYXRvciA/IHlpZWxkRXhwcmVzc2lvbkRlbGVnYXRlKGludm9rZSkgOiBpbnZva2Vcblx0fSxcblxuXHRjYXNlQm9keSA9IChwYXJ0cywgb3BFbHNlKSA9PiB7XG5cdFx0bGV0IGFjYyA9IGlmRWxzZShvcEVsc2UsIHQwLCAoKSA9PiB0aHJvd0Vycm9yKCdObyBicmFuY2ggb2YgYGNhc2VgIG1hdGNoZXMuJykpXG5cdFx0Zm9yIChsZXQgaSA9IHBhcnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaSA9IGkgLSAxKVxuXHRcdFx0YWNjID0gdDEocGFydHNbaV0sIGFjYylcblx0XHRyZXR1cm4gYWNjXG5cdH0sXG5cblx0bG9vcElkID0gbG9vcCA9PiBpZENhY2hlZChgbG9vcCR7bG9vcC5sb2Muc3RhcnQubGluZX1gKVxuIl0sInNvdXJjZVJvb3QiOiIvc3JjIn0=