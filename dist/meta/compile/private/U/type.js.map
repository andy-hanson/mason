{"version":3,"sources":["meta/compile/private/U/type.js"],"names":[],"mappings":";;;;;kBAGwB,IAAI;;KAHrB,EAAE;;KACA,MAAM,SAAN,MAAM;;AAEA,UAAS,IAAI,GAAG;AAC9B,MAAI,CAAC,MAAM,CAAC,KAAK,EAChB,OAAM;AACP,OAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAC9C,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;EACzC;;AAED,UAAS,QAAQ,CAAC,QAAQ,EAAE,OAAO,EAAE;AACpC,MAAI,OAAO,YAAY,KAAK,EAAE;AAC7B,SAAM,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,CAAC,CAAA;AAC5B,SAAM,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAA;AACzB,OAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAA;AACrB,WAAQ,CAAC,OAAO,CAAC,UAAA,EAAE,EAAI;;AAEtB,QAAI,CAAC,EAAE,EAAE,MAAM,CAAC,CAAA;IAChB,CAAC,CAAA;GACF;AACD,MAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,OAAO,CAAC,EAAE;AAC5B,OAAI,QAAQ,KAAK,IAAI,EAAE,MAAM,IAAI,KAAK,CAAC,YAAY,CAAC,CAAA;AACpD,OAAI,QAAQ,KAAK,SAAS,EAAE,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAA;AAC9D,SAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO,CAAA;AACxC,SAAM,OAAO,GACZ,OAAO,YAAY,KAAK,SACpB,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,SACnB,OAAO,YAAY,GAAG,SAClB,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,GAC5B,OAAO,CAAC,WAAW,IAAI,OAAO,CAAC,IAAI,AAAC,CAAA;AACtC,SAAM,IAAI,KAAK,MAAI,QAAQ,kBAAa,OAAO,CAAG,CAAA;GAClD;EACD;;AAED,UAAS,GAAG,CAAC,QAAQ,EAAE,OAAO,EAAE;AAC/B,UAAQ,IAAI;AACX,QAAK,OAAO,CAAC,SAAS,KAAK,SAAS;AACnC,WAAO,QAAQ,IAAI,IAAI,IAAI,OAAO,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAA;AAAA,AAC7E,QAAK,OAAO,YAAY,KAAK;AAAE;AAC9B,WAAM,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,CAAC,CAAA;AAC5B,WAAM,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAA;AACzB,YAAO,QAAQ,YAAY,KAAK,IAC/B,QAAQ,CAAC,KAAK,CAAC,UAAA,EAAE;aAAI,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC;MAAA,CAAC,CAAA;KACtC;AAAA,AACD,QAAK,EAAE,CAAC,SAAS,CAAC,aAAa,CAAC,OAAO,CAAC;AACvC,WAAO,QAAQ,YAAY,KAAK,IAC/B,QAAQ,CAAC,MAAM,GAAG,CAAC,KAClB,QAAQ,CAAC,MAAM,KAAK,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,CAAA,AAAC,CAAA;AAAA,AAC3D,QAAK,OAAO,YAAY,GAAG;AAC1B,WAAO,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;AAAA,AAC7B;AACC,UAAM,IAAI,KAAK,kBAAgB,OAAO,CAAG,CAAA;AAAA,GAC1C;EACD","file":"meta/compile/private/U/type.js","sourcesContent":["import Op from './Op'\nimport { assert } from './util'\n\nexport default function type() {\n\tif (!global.DEBUG)\n\t\treturn\n\tfor (let i = 0; i < arguments.length; i = i + 2)\n\t\ttypePair(arguments[i], arguments[i + 1])\n}\n\nfunction typePair(instance, itsType) {\n\tif (itsType instanceof Array) {\n\t\tassert(itsType.length === 1)\n\t\tconst emType = itsType[0]\n\t\ttype(instance, Array)\n\t\tinstance.forEach(em => {\n\t\t\t// console.log(type) // TODO: turning on this line causes a crash in node v0.11.15.\n\t\t\ttype(em, emType)\n\t\t})\n\t}\n\tif (!isa(instance, itsType)) {\n\t\tif (instance === null) throw new Error('Value null')\n\t\tif (instance === undefined) throw new Error('Value undefined')\n\t\tconst toArray = require('./Bag').toArray\n\t\tconst strType =\n\t\t\titsType instanceof Array ?\n\t\t\t`[${itsType[0].name}]` :\n\t\t\titsType instanceof Set ?\n\t\t\t`{${toArray(itsType.values())}` :\n\t\t\t(itsType.displayName || itsType.name)\n\t\tthrow new Error(`${instance} is not a ${strType}`)\n\t}\n}\n\nfunction isa(instance, itsType) {\n\tswitch (true) {\n\t\tcase itsType.prototype !== undefined:\n\t\t\treturn instance != null && itsType.prototype.isPrototypeOf(Object(instance))\n\t\tcase itsType instanceof Array: {\n\t\t\tassert(itsType.length === 1)\n\t\t\tconst emType = itsType[0]\n\t\t\treturn instance instanceof Array &&\n\t\t\t\tinstance.every(em => isa(em, emType))\n\t\t}\n\t\tcase Op.prototype.isPrototypeOf(itsType):\n\t\t\treturn instance instanceof Array &&\n\t\t\t\tinstance.length < 2 &&\n\t\t\t\t(instance.length === 0 || isa(instance[0], itsType.type))\n\t\tcase itsType instanceof Set:\n\t\t\treturn itsType.has(instance)\n\t\tdefault:\n\t\t\tthrow new Error(`Not a type: ${itsType}`)\n\t}\n}\n"],"sourceRoot":"/src"}