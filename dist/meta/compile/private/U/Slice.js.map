{"version":3,"sources":["meta/compile/private/U/Slice.js"],"names":[],"mappings":"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","file":"meta/compile/private/U/Slice.js","sourcesContent":["import { isEmpty } from './Bag'\nimport { None, some } from './Op'\nimport type from './type'\nimport { assert } from './util'\n\nexport default class Slice {\n\tconstructor(data, start, end) {\n\t\tthis.data = data\n\t\tif (start === undefined) {\n\t\t\tassert(end === undefined)\n\t\t\tthis.start = 0\n\t\t\tthis.end = data.length\n\t\t} else {\n\t\t\tthis.start = start\n\t\t\tthis.end = end\n\t\t\tassert(0 <= start && start <= end && end <= data.length)\n\t\t}\n\t}\n\n\tsize() {\n\t\treturn this.end - this.start\n\t}\n\n\tisEmpty() {\n\t\tassert(this.start <= this.end)\n\t\treturn this.start === this.end\n\t}\n\n\thead() {\n\t\tassert(!this.isEmpty())\n\t\treturn this.data[this.start]\n\t}\n\n\tsecond() {\n\t\tassert(this.size() >= 2)\n\t\treturn this.data[this.start + 1]\n\t}\n\n\tlast() {\n\t\tassert(!this.isEmpty())\n\t\treturn this.data[this.end - 1]\n\t}\n\n\ttail() {\n\t\tassert(!this.isEmpty())\n\t\treturn this._new(this.start + 1, this.end)\n\t}\n\n\trtail() {\n\t\tassert(!this.isEmpty())\n\t\treturn this._new(this.start, this.end - 1)\n\t}\n\n\topSplitOnceWhere(splitOn) {\n\t\tfor (let i = this.start; i < this.end; i = i + 1)\n\t\t\tif (splitOn(this.data[i]))\n\t\t\t\treturn some({\n\t\t\t\t\tbefore: this._new(this.start, i),\n\t\t\t\t\tat: this.data[i],\n\t\t\t\t\tafter: this._new(i + 1, this.end)\n\t\t\t\t})\n\t\treturn None\n\t}\n\n\topSplitManyWhere(splitOn) {\n\t\tlet iLast = this.start\n\t\tconst out = []\n\t\tfor (let i = this.start; i < this.end; i = i + 1)\n\t\t\tif (splitOn(this.data[i])) {\n\t\t\t\tout.push({ before: this._new(iLast, i), at: this.data[i] })\n\t\t\t\tiLast = i + 1\n\t\t\t}\n\n\t\tif (isEmpty(out))\n\t\t\treturn None\n\t\telse {\n\t\t\tout.push({ before: this._new(iLast, this.end) })\n\t\t\treturn some(out)\n\t\t}\n\t}\n\n\t_new(start, end) {\n\t\treturn new Slice(this.data, start, end)\n\t}\n\n\teach(f) {\n\t\tfor (let i = this.start; i < this.end; i = i + 1)\n\t\t\tf(this.data[i])\n\t}\n\n\tmap(f) {\n\t\tconst out = []\n\t\tthis.each(_ => out.push(f(_)))\n\t\treturn out\n\t}\n\n\tflatMap(f) {\n\t\tconst out = []\n\t\tthis.each(_ => out.push(...f(_)))\n\t\treturn out\n\t}\n\n\treduce(reducer, start) {\n\t\tlet acc = start\n\t\tthis.each(_ => acc = reducer(acc, _))\n\t\treturn acc\n\t}\n\n\ttoString() {\n\t\treturn '[' + this.data.slice(this.start, this.end).toString() + ']'\n\t}\n}\n"],"sourceRoot":"/src"}