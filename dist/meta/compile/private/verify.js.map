{"version":3,"sources":["meta/compile/private/verify.js"],"names":[],"mappings":"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","file":"meta/compile/private/verify.js","sourcesContent":["import { code } from '../CompileError'\nimport * as EExports from '../Expression'\nimport Expression, { Assign, AssignDestructure, BlockVal, Call, Debug, Do, ELiteral,\n\tGlobalAccess, Special, Use, UseDo, Yield, YieldTo } from '../Expression'\nimport { head, isEmpty, toArray } from './U/Bag'\nimport { ifElse, some } from './U/Op'\nimport type from './U/type'\nimport { implementMany } from './U/util'\nimport { emptyVr, VrLocalInfo } from './Vr'\n\nconst vm = es => es.forEach(e => e.verify())\n\nlet\n\tcx,\n\tlocals,\n\t// Locals for this block.\n\t// Replaces `locals` when entering into sub-function.\n\tpendingBlockLocals,\n\tisInDebug,\n\tisInGenerator,\n\topLoop,\n\tvr\n\nconst\n\tinit = _cx => {\n\t\tcx = _cx\n\t\tlocals = new Map()\n\t\tpendingBlockLocals = []\n\t\tisInDebug = false\n\t\tisInGenerator = false\n\t\topLoop = []\n\t\tvr = emptyVr()\n\t},\n\t// Release for garbage collection\n\tuninit = () => {\n\t\tlocals = pendingBlockLocals = opLoop = vr = undefined\n\t},\n\n\twithInGenerator = (_isInGenerator, fun) => {\n\t\tconst g = isInGenerator\n\t\tisInGenerator = _isInGenerator\n\t\tfun()\n\t\tisInGenerator = g\n\t},\n\n\tplusLocals = (addedLocals, fun) => {\n\t\tconst shadowed = new Map()\n\t\taddedLocals.forEach(l => {\n\t\t\tconst got = locals.get(l.name)\n\t\t\tif (got !== undefined)\n\t\t\t\tshadowed.set(l.name, got)\n\t\t\tlocals.set(l.name, l)\n\t\t})\n\t\tfun()\n\t\taddedLocals.forEach(l => {\n\t\t\tconst s = shadowed.get(l.name)\n\t\t\tif (s === undefined)\n\t\t\t\tlocals.delete(l.name)\n\t\t\telse\n\t\t\t\tlocals.set(l.name, s)\n\t\t})\n\t},\n\n\tplusPendingBlockLocals = (pending, fun) => {\n\t\tconst oldLength = pendingBlockLocals.length\n\t\tpendingBlockLocals.push(...pending)\n\t\tfun()\n\t\twhile (pendingBlockLocals.length > oldLength)\n\t\t\tpendingBlockLocals.pop()\n\t},\n\n\twithInLoop = (loop, fun) => {\n\t\tconst l = opLoop\n\t\topLoop = some(loop)\n\t\tfun()\n\t\topLoop = l\n\t},\n\n\twithInDebug = (_isInDebug, fun) => {\n\t\tconst d = isInDebug\n\t\tisInDebug = _isInDebug\n\t\tfun()\n\t\tisInDebug = d\n\t},\n\n\twithBlockLocals = fun => {\n\t\tconst bl = pendingBlockLocals\n\t\tpendingBlockLocals = []\n\t\tplusLocals(bl, fun)\n\t\tpendingBlockLocals = bl\n\t},\n\n\t// Vr setters\n\tsetEndLoop = (endLoop, loop) => {\n\t\tvr.endLoopToLoop.set(endLoop, loop)\n\t},\n\n\tregisterLocal = local => {\n\t\tvr.localToInfo.set(local, VrLocalInfo(\tisInDebug, [], []))\n\t},\n\n\tlocalAccess = access => {\n\t\tconst name = access.name\n\t\tconst local = locals.get(name)\n\t\tif (local !== undefined) {\n\t\t\tvr.accessToLocal.set(access, local)\n\t\t\tconst info = vr.localToInfo.get(local)\n\t\t\tconst accesses = isInDebug ? info.debugAccesses : info.nonDebugAccesses\n\t\t\taccesses.push(access)\n\t\t} else\n\t\t\tcx.fail(access.loc,\n\t\t\t\t`Could not find local or global ${code(name)}.\\n` +\n\t\t\t\t'Available locals are:\\n' +\n\t\t\t\t`${code(toArray(locals.keys()).join(' '))}.`)\n\t}\n\nexport default function verify(cx, e) {\n\tinit(cx)\n\te.verify()\n\tverifyLocalUse()\n\tconst out = vr\n\tuninit()\n\treturn out\n}\n\nconst verifyLocalUse = () => {\n\tvr.localToInfo.forEach((info, local) => {\n\t\tconst noNonDebug = isEmpty(info.nonDebugAccesses)\n\t\tif (noNonDebug && isEmpty(info.debugAccesses))\n\t\t\tcx.warnIf(!local.okToNotUse, local.loc, () =>\n\t\t\t\t`Unused local variable ${code(local.name)}.`)\n\t\telse if (info.isInDebug)\n\t\t\tcx.check(noNonDebug, () => head(info.nonDebugAccesses).loc, () =>\n\t\t\t\t`Debug-only local ${code(local.name)} used outside of debug.`)\n\t\telse\n\t\t\tcx.warnIf(!local.okToNotUse && noNonDebug, local.loc, () =>\n\t\t\t\t`Local ${code(local.name)} used only in debug.`)\n\t})\n}\n\nimplementMany(EExports, 'verify', {\n\tAssign() {\n\t\t//TODO:higher-order\n\t\tconst doV = () => vm([ this.assignee, this.value ])\n\t\tif (this.assignee.isLazy)\n\t\t\twithBlockLocals(doV)\n\t\telse\n\t\t\tdoV()\n\t},\n\tBlockDo() { verifyLines(this.lines) },\n\tBlockVal() {\n\t\tconst newLocals = verifyLines(this.lines)\n\t\tplusLocals(newLocals, () => this.returned.verify())\n\t},\n\tBlockWrap() {\n\t\tthis.block.verify()\n\t},\n\tCaseDo: verifyCase,\n\tCaseVal: verifyCase,\n\t// Only reach here for in/out condition\n\tDebug() { verifyLines([ this ]) },\n\tEndLoop() {\n\t\t//TODO:higher-order\n\t\tifElse(opLoop,\n\t\t\tloop => setEndLoop(this, loop),\n\t\t\t() => fail(this.loc, 'Not in a loop.'))\n\t},\n\tFun() {\n\t\twithBlockLocals(() => {\n\t\t\tcx.check(isEmpty(this.opResDeclare) || this.block instanceof BlockVal, this.loc,\n\t\t\t\t'Function with return condition must return something.')\n\t\t\tthis.args.forEach(arg => vm(arg.opType))\n\t\t\twithInGenerator(this.k === '~|', () => {\n\t\t\t\tconst allArgs = this.args.concat(this.opRestArg)\n\t\t\t\tallArgs.forEach(_ => registerLocal(_))\n\t\t\t\tplusLocals(allArgs, () => {\n\t\t\t\t\tvm(this.opIn)\n\t\t\t\t\tthis.block.verify()\n\t\t\t\t\tthis.opResDeclare.forEach(rd => {\n\t\t\t\t\t\trd.verify()\n\t\t\t\t\t\tregisterLocal(rd)\n\t\t\t\t\t})\n\t\t\t\t\tthis.opOut.forEach(o => plusLocals(this.opResDeclare, () => o.verify()))\n\t\t\t\t})\n\t\t\t})\n\t\t})\n\t},\n\t//TODO: This is silly...\n\tLocalAccess() { localAccess(this) },\n\tLoop() { withInLoop(this, () => this.block.verify()) },\n\t//TODO: No such thing as buildVxBlockLine...\n\t// Adding LocalDeclares to the available locals is done by Fun and buildVxBlockLine.\n\tLocalDeclare() { vm(this.opType) },\n\tMapEntry() {\n\t\tthis.key.verify()\n\t\tthis.val.verify()\n\t},\n\tModule() {\n\t\tconst useLocals = verifyUses(this.uses, this.debugUses)\n\t\tplusLocals(useLocals, () => this.block.verify())\n\t},\n\tYield() {\n\t\tcx.check(isInGenerator, this.loc, 'Cannot yield outside of generator context')\n\t\tthis.yielded.verify()\n\t},\n\tYieldTo() {\n\t\tcx.check(isInGenerator, this.loc, 'Cannot yield outside of generator context')\n\t\tthis.yieldedTo.verify()\n\t},\n\n\t// These ones just recurse to their children.\n\tAssignDestructure() {\n\t\tthis.value.verify()\n\t\tvm(this.assignees)\n\t},\n\tCall() {\n\t\tthis.called.verify()\n\t\tvm(this.args)\n\t},\n\tCaseDoPart: verifyCasePart,\n\tCaseValPart: verifyCasePart,\n\tGlobalAccess() { },\n\tObjReturn() { vm(this.opObjed) },\n\tObjSimple() {\n\t\tObject.getOwnPropertyNames(this.keysVals).forEach(key => this.keysVals[key].verify())\n\t},\n\tLazy() { withBlockLocals(() => this.value.verify()) },\n\tListReturn() { },\n\tListEntry() { this.value.verify() },\n\tListSimple() { vm(this.parts) },\n\tELiteral() { cx.warnIf(this.k === 'js', this.loc, 'Js literal') },\n\tMapReturn() { },\n\tMember() { this.object.verify() },\n\tModuleDefaultExport() { this.value.verify() },\n\tQuote() { vm(this.parts) },\n\tSpecial() { },\n\tSplat() { this.splatted.verify() }\n})\n\nfunction verifyCase() {\n\tconst newLocals = []\n\tthis.opCased.forEach(cased => {\n\t\tregisterLocal(cased.assignee)\n\t\tcased.verify()\n\t\tnewLocals.push(cased.assignee)\n\t})\n\tplusLocals(newLocals, () => {\n\t\tvm(this.parts)\n\t\tvm(this.opElse)\n\t})\n}\n\nfunction verifyCasePart() {\n\tthis.test.verify()\n\tthis.result.verify()\n}\n\nfunction verifyUses(uses, debugUses) {\n\tconst useLocals = []\n\tuses.forEach(use => {\n\t\tif (!(use instanceof UseDo)) {\n\t\t\ttype(use, Use)\n\t\t\tuse.used.concat(use.opUseDefault).forEach(_ => {\n\t\t\t\tregisterLocal(_)\n\t\t\t\tuseLocals.push(_)\n\t\t\t})\n\t\t}\n\t})\n\twithInDebug(true, () =>\n\t\tdebugUses.forEach(use =>\n\t\t\tuse.used.concat(use.opUseDefault).forEach(_ => {\n\t\t\t\tregisterLocal(_)\n\t\t\t\tuseLocals.push(_)\n\t\t\t})))\n\treturn useLocals\n}\n\nfunction verifyLines(lines) {\n\tconst lineToLocals = new Map()\n\tlet prevLocals = []\n\tlet allNewLocals = []\n\n\tfunction processLine(line) {\n\t\tif (line instanceof Debug)\n\t\t\t// TODO: Do anything in this situation?\n\t\t\t// cx.check(!inDebug, line.loc, 'Redundant `debug`.')\n\t\t\twithInDebug(true, () => line.lines.forEach(processLine))\n\t\telse {\n\t\t\tverifyIsStatement(line)\n\t\t\tconst lineNews = lineNewLocals(line)\n\t\t\tprevLocals.forEach(prevLocal =>\n\t\t\t\tlineNews.forEach(newLocal =>\n\t\t\t\t\tcx.check(\n\t\t\t\t\t\tprevLocal.name !== newLocal.name, newLocal.loc,\n\t\t\t\t\t\t`${code(newLocal.name)} already declared at ${prevLocal.loc.start}`)))\n\t\t\tlineNews.forEach(_ => registerLocal(_))\n\t\t\tconst newLocals = prevLocals.concat(lineNews)\n\t\t\tlineToLocals.set(line, prevLocals)\n\t\t\tprevLocals = newLocals\n\t\t\t// Final set value is answer\n\t\t\tallNewLocals = newLocals\n\t\t}\n\t}\n\n\tlines.forEach(processLine)\n\n\tfunction verifyLine(line) {\n\t\tif (line instanceof Debug)\n\t\t\twithInDebug(true, () => line.lines.forEach(verifyLine))\n\t\telse\n\t\t\tplusLocals(lineToLocals.get(line), () =>\n\t\t\t\tplusPendingBlockLocals(allNewLocals, () =>\n\t\t\t\t\tline.verify()))\n\t}\n\n\tlines.forEach(verifyLine)\n\n\treturn allNewLocals\n}\n\nfunction verifyIsStatement(line) {\n\tswitch (true) {\n\t\tcase line instanceof Do:\n\t\t// Some Vals are also conceptually Dos, but this was easier than multiple inheritance.\n\t\tcase line instanceof Call:\n\t\tcase line instanceof ELiteral && line.k === 'js':\n\t\tcase line instanceof Special && line.k === 'debugger':\n\t\t// OK, used to mean `pass`\n\t\tcase line instanceof GlobalAccess && line.name === 'null':\n\t\tcase line instanceof Yield:\n\t\tcase line instanceof YieldTo:\n\t\t\treturn\n\t\tdefault:\n\t\t\tcx.fail(line.loc, 'Expression in statement position.')\n\t}\n}\n\nfunction lineNewLocals(line) {\n\ttype(line, Expression)\n\treturn line instanceof Assign ?\n\t\t[ line.assignee ] :\n\t\tline instanceof AssignDestructure ?\n\t\tline.assignees :\n\t\t[ ]\n}\n"],"sourceRoot":"/src"}