if (typeof define !== 'function') var define = require('amdefine')(module);define(['exports', 'module'], function (exports, module) {
	//TODO: clean up everything!

	//don't use
	'use strict';

	var map = function (array, fun) {
		return array.map(fun);
	};

	//don't use
	var indexOf = function (arr, elem) {
		return arr.indexOf(elem);
	};

	//don't use
	var isArray = function (arr) {
		return arr instanceof Array;
	};

	//don't use
	var forEach = function (arr, fun) {
		for (let i = 0; i < arr.length; i++) fun(arr[i], i);
	};

	//don't use
	var reduce = function (arr, reducer) {
		return arr.reduce(reducer);
	};

	/**
  * Make sure `Object.keys` work for `undefined`
  * values that are still there, like `document.all`.
  * http://lists.w3.org/Archives/Public/public-html/2009Jun/0546.html
  *
  * @api private
  */

	function objectKeys(val) {
		if (Object.keys) return Object.keys(val);
		return Object.keys(val);
	}

	module.exports = inspect;

	/**
  * Echos the value of a value. Trys to print the value out
  * in the best way possible given the different types.
  *
  * @param {Object} obj The object to print out.
  * @param {Object} opts Optional options object that alters the output.
  * @license MIT (© Joyent)
  */
	/* legacy: obj, showHidden, depth, colors*/

	function inspect(obj, opts) {
		// default options
		var ctx = {
			seen: [],
			stylize: stylizeNoColor
		};
		// legacy...
		if (arguments.length >= 3) ctx.depth = arguments[2];
		if (arguments.length >= 4) ctx.colors = arguments[3];
		if (isBoolean(opts)) {
			// legacy...
			ctx.showHidden = opts;
		} else if (opts) {
			// got an "options" object
			_extend(ctx, opts);
		}
		// set default options
		if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
		if (isUndefined(ctx.depth)) ctx.depth = 2;
		if (isUndefined(ctx.colors)) ctx.colors = false;
		if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
		if (ctx.colors) ctx.stylize = stylizeWithColor;
		return formatValue(ctx, obj, ctx.depth);
	}

	// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
	inspect.colors = {
		'bold': [1, 22],
		'italic': [3, 23],
		'underline': [4, 24],
		'inverse': [7, 27],
		'white': [37, 39],
		'grey': [90, 39],
		'black': [30, 39],
		'blue': [34, 39],
		'cyan': [36, 39],
		'green': [32, 39],
		'magenta': [35, 39],
		'red': [31, 39],
		'yellow': [33, 39]
	};

	// Don't use 'blue' not visible on cmd.exe
	inspect.styles = {
		'special': 'cyan',
		'number': 'yellow',
		'boolean': 'yellow',
		'undefined': 'grey',
		'null': 'bold',
		'string': 'green',
		'date': 'magenta',
		// "name": intentionally not styling
		'regexp': 'red'
	};

	function stylizeNoColor(str, styleType) {
		return str;
	}

	function isBoolean(arg) {
		return typeof arg === 'boolean';
	}

	function isUndefined(arg) {
		return arg === void 0;
	}

	function stylizeWithColor(str, styleType) {
		var style = inspect.styles[styleType];

		if (style) {
			return '\u001b[' + inspect.colors[style][0] + 'm' + str + '\u001b[' + inspect.colors[style][1] + 'm';
		} else {
			return str;
		}
	}

	function isFunction(arg) {
		return typeof arg === 'function';
	}

	function isString(arg) {
		return typeof arg === 'string';
	}

	function isNumber(arg) {
		return typeof arg === 'number';
	}

	function isNull(arg) {
		return arg === null;
	}

	function hasOwn(obj, prop) {
		return Object.prototype.hasOwnProperty.call(obj, prop);
	}

	function isRegExp(re) {
		return isObject(re) && objectToString(re) === '[object RegExp]';
	}

	function isObject(arg) {
		return typeof arg === 'object' && arg !== null;
	}

	function isError(e) {
		return isObject(e) && (objectToString(e) === '[object Error]' || e instanceof Error);
	}

	function isDate(d) {
		return isObject(d) && objectToString(d) === '[object Date]';
	}

	function objectToString(o) {
		return Object.prototype.toString.call(o);
	}

	function arrayToHash(array) {
		var hash = {};

		forEach(array, function (val, idx) {
			hash[val] = true;
		});

		return hash;
	}

	function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
		var output = [];
		for (var i = 0, l = value.length; i < l; ++i) {
			if (hasOwn(value, String(i))) {
				output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, String(i), true));
			} else {
				output.push('');
			}
		}
		forEach(keys, function (key) {
			if (!key.match(/^\d+$/)) {
				output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, key, true));
			}
		});
		return output;
	}

	function formatError(value) {
		return '[' + Error.prototype.toString.call(value) + ']';
	}

	function formatValue(ctx, value, recurseTimes) {
		// Provide a hook for user-specified inspect functions.
		// Check that value is an object with an inspect function on it
		if (ctx.customInspect && value && isFunction(value.inspect) &&
		// Filter out the util module, it's inspect function is special
		value.inspect !== inspect &&
		// Also filter out any prototype objects using the circular check.
		!(value.constructor && value.constructor.prototype === value)) {
			var ret = value.inspect(recurseTimes, ctx);
			if (!isString(ret)) {
				ret = formatValue(ctx, ret, recurseTimes);
			}
			return ret;
		}

		// Primitive types cannot have properties
		var primitive = formatPrimitive(ctx, value);
		if (primitive) {
			return primitive;
		}

		// Look up the keys of the object.
		var keys = objectKeys(value);
		var visibleKeys = arrayToHash(keys);

		try {
			if (ctx.showHidden && Object.getOwnPropertyNames) {
				keys = Object.getOwnPropertyNames(value);
			}
		} catch (e) {}
		// ignore

		// IE doesn't make error fields non-enumerable
		// http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
		if (isError(value) && (indexOf(keys, 'message') >= 0 || indexOf(keys, 'description') >= 0)) {
			return formatError(value);
		}

		// Some type of object without properties can be shortcutted.
		if (keys.length === 0) {
			if (isFunction(value)) {
				var name = value.name ? ': ' + value.name : '';
				return ctx.stylize('[Function' + name + ']', 'special');
			}
			if (isRegExp(value)) {
				return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
			}
			if (isDate(value)) {
				return ctx.stylize(Date.prototype.toString.call(value), 'date');
			}
			if (isError(value)) {
				return formatError(value);
			}
		}

		var base = '',
		    array = false,
		    braces = ['{', '}'];

		// Make Array say that they are Array
		if (isArray(value)) {
			array = true;
			braces = ['[', ']'];
		}

		// Make functions say that they are functions
		if (isFunction(value)) {
			var n = value.name ? ': ' + value.name : '';
			base = ' [Function' + n + ']';
		}

		// Make RegExps say that they are RegExps
		if (isRegExp(value)) {
			base = ' ' + RegExp.prototype.toString.call(value);
		}

		// Make dates with properties first say the date
		if (isDate(value)) {
			base = ' ' + Date.prototype.toUTCString.call(value);
		}

		// Make error with message first say the error
		if (isError(value)) {
			base = ' ' + formatError(value);
		}

		if (keys.length === 0 && (!array || value.length == 0)) {
			return braces[0] + base + braces[1];
		}

		if (recurseTimes < 0) {
			if (isRegExp(value)) {
				return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
			} else {
				return ctx.stylize('[Object]', 'special');
			}
		}

		ctx.seen.push(value);

		var output;
		if (array) {
			output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
		} else {
			output = map(keys, function (key) {
				return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
			});
		}

		ctx.seen.pop();

		return reduceToSingleString(output, base, braces);
	}

	function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
		var name, str, desc;
		desc = { value: void 0 };
		try {
			// ie6 › navigator.toString
			// throws Error: Object doesn't support this property or method
			desc.value = value[key];
		} catch (e) {
			// ignore
		}
		try {
			// ie10 › Object.getOwnPropertyDescriptor(window.location, 'hash')
			// throws TypeError: Object doesn't support this action
			if (Object.getOwnPropertyDescriptor) {
				desc = Object.getOwnPropertyDescriptor(value, key) || desc;
			}
		} catch (e) {
			// ignore
		}
		if (desc.get) {
			if (desc.set) {
				str = ctx.stylize('[Getter/Setter]', 'special');
			} else {
				str = ctx.stylize('[Getter]', 'special');
			}
		} else {
			if (desc.set) {
				str = ctx.stylize('[Setter]', 'special');
			}
		}
		if (!hasOwn(visibleKeys, key)) {
			name = '[' + key + ']';
		}
		if (!str) {
			if (indexOf(ctx.seen, desc.value) < 0) {
				if (isNull(recurseTimes)) {
					str = formatValue(ctx, desc.value, null);
				} else {
					str = formatValue(ctx, desc.value, recurseTimes - 1);
				}
				if (str.indexOf('\n') > -1) {
					if (array) {
						str = map(str.split('\n'), function (line) {
							return '  ' + line;
						}).join('\n').substr(2);
					} else {
						str = '\n' + map(str.split('\n'), function (line) {
							return '   ' + line;
						}).join('\n');
					}
				}
			} else {
				str = ctx.stylize('[Circular]', 'special');
			}
		}
		if (isUndefined(name)) {
			if (array && key.match(/^\d+$/)) {
				return str;
			}
			name = JSON.stringify('' + key);
			if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
				name = name.substr(1, name.length - 2);
				name = ctx.stylize(name, 'name');
			} else {
				name = name.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'");
				name = ctx.stylize(name, 'string');
			}
		}

		return name + ': ' + str;
	}

	function formatPrimitive(ctx, value) {
		if (isUndefined(value)) return ctx.stylize('undefined', 'undefined');
		if (isString(value)) {
			var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '').replace(/'/g, "\\'").replace(/\\"/g, '"') + '\'';
			return ctx.stylize(simple, 'string');
		}
		if (isNumber(value)) return ctx.stylize('' + value, 'number');
		if (isBoolean(value)) return ctx.stylize('' + value, 'boolean');
		// For some reason typeof null is "object", so special case here.
		if (isNull(value)) return ctx.stylize('null', 'null');
	}

	function reduceToSingleString(output, base, braces) {
		var numLinesEst = 0;
		var length = reduce(output, function (prev, cur) {
			numLinesEst++;
			if (cur.indexOf('\n') >= 0) numLinesEst++;
			return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
		}, 0);

		if (length > 60) {
			return braces[0] + (base === '' ? '' : base + '\n ') + ' ' + output.join(',\n  ') + ' ' + braces[1];
		}

		return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
	}

	function _extend(origin, add) {
		// Don't do anything if add isn't an object
		if (!add || !isObject(add)) return origin;

		var keys = objectKeys(add);
		var i = keys.length;
		while (i--) {
			origin[keys[i]] = add[keys[i]];
		}
		return origin;
	}
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByaXZhdGUvdXRpbC1pbnNwZWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUlBLEtBQUksR0FBRyxHQUFHLFVBQVMsS0FBSyxFQUFFLEdBQUcsRUFBRTtBQUM5QixTQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7RUFDckIsQ0FBQTs7O0FBR0QsS0FBSSxPQUFPLEdBQUcsVUFBUyxHQUFHLEVBQUUsSUFBSSxFQUFFO0FBQ2pDLFNBQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQTtFQUN4QixDQUFBOzs7QUFHRCxLQUFJLE9BQU8sR0FBRyxVQUFTLEdBQUcsRUFBRTtBQUMzQixTQUFPLEdBQUcsWUFBWSxLQUFLLENBQUE7RUFDM0IsQ0FBQTs7O0FBR0QsS0FBSSxPQUFPLEdBQUcsVUFBUyxHQUFHLEVBQUUsR0FBRyxFQUFFO0FBQ2hDLE9BQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUNsQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0VBQ2YsQ0FBQTs7O0FBR0QsS0FBSSxNQUFNLEdBQUcsVUFBUyxHQUFHLEVBQUUsT0FBTyxFQUFFO0FBQ25DLFNBQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQTtFQUMxQixDQUFBOzs7Ozs7Ozs7O0FBV0QsVUFBUyxVQUFVLENBQUMsR0FBRyxFQUFDO0FBQ3ZCLE1BQUksTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDekMsU0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3hCOztrQkFHYyxPQUFPOzs7Ozs7Ozs7Ozs7QUFZdEIsVUFBUyxPQUFPLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRTs7QUFFM0IsTUFBSSxHQUFH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QUM7R0FDZDs7QUFFRCxTQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNwRTs7QUFFRCxVQUFTLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFOztBQUU3QixNQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE9BQU8sTUFBTSxDQUFDOztBQUUxQyxNQUFJLElBQUksR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDM0IsTUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUNwQixTQUFPLENBQUMsRUFBRSxFQUFFO0FBQ1gsU0FBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztHQUMvQjtBQUNELFNBQU8sTUFBTSxDQUFDO0VBQ2QiLCJmaWxlIjoicHJpdmF0ZS91dGlsLWluc3BlY3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vVE9ETzogY2xlYW4gdXAgZXZlcnl0aGluZyFcblxuLy9kb24ndCB1c2VcbnZhciBtYXAgPSBmdW5jdGlvbihhcnJheSwgZnVuKSB7XG5cdHJldHVybiBhcnJheS5tYXAoZnVuKVxufVxuXG4vL2Rvbid0IHVzZVxudmFyIGluZGV4T2YgPSBmdW5jdGlvbihhcnIsIGVsZW0pIHtcblx0cmV0dXJuIGFyci5pbmRleE9mKGVsZW0pXG59XG5cbi8vZG9uJ3QgdXNlXG52YXIgaXNBcnJheSA9IGZ1bmN0aW9uKGFycikge1xuXHRyZXR1cm4gYXJyIGluc3RhbmNlb2YgQXJyYXlcbn1cblxuLy9kb24ndCB1c2VcbnZhciBmb3JFYWNoID0gZnVuY3Rpb24oYXJyLCBmdW4pIHtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspXG5cdFx0ZnVuKGFycltpXSwgaSlcbn1cblxuLy9kb24ndCB1c2VcbnZhciByZWR1Y2UgPSBmdW5jdGlvbihhcnIsIHJlZHVjZXIpIHtcblx0cmV0dXJuIGFyci5yZWR1Y2UocmVkdWNlcilcbn1cblxuXG4vKipcbiAqIE1ha2Ugc3VyZSBgT2JqZWN0LmtleXNgIHdvcmsgZm9yIGB1bmRlZmluZWRgXG4gKiB2YWx1ZXMgdGhhdCBhcmUgc3RpbGwgdGhlcmUsIGxpa2UgYGRvY3VtZW50LmFsbGAuXG4gKiBodHRwOi8vbGlzdHMudzMub3JnL0FyY2hpdmVzL1B1YmxpYy9wdWJsaWMtaHRtbC8yMDA5SnVuLzA1NDYuaHRtbFxuICpcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIG9iamVjdEtleXModmFsKXtcblx0aWYgKE9iamVjdC5rZXlzKSByZXR1cm4gT2JqZWN0LmtleXModmFsKTtcblx0cmV0dXJuIE9iamVjdC5rZXlzKHZhbCk7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgaW5zcGVjdDtcblxuLyoqXG4gKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG4gKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cbiAqIEBsaWNlbnNlIE1JVCAowqkgSm95ZW50KVxuICovXG4vKiBsZWdhY3k6IG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycyovXG5cbmZ1bmN0aW9uIGluc3BlY3Qob2JqLCBvcHRzKSB7XG5cdC8vIGRlZmF1bHQgb3B0aW9uc1xuXHR2YXIgY3R4ID0ge1xuXHRcdHNlZW46IFtdLFxuXHRcdHN0eWxpemU6IHN0eWxpemVOb0NvbG9yXG5cdH07XG5cdC8vIGxlZ2FjeS4uLlxuXHRpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAzKSBjdHguZGVwdGggPSBhcmd1bWVudHNbMl07XG5cdGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIGN0eC5jb2xvcnMgPSBhcmd1bWVudHNbM107XG5cdGlmIChpc0Jvb2xlYW4ob3B0cykpIHtcblx0XHQvLyBsZWdhY3kuLi5cblx0XHRjdHguc2hvd0hpZGRlbiA9IG9wdHM7XG5cdH0gZWxzZSBpZiAob3B0cykge1xuXHRcdC8vIGdvdCBhbiBcIm9wdGlvbnNcIiBvYmplY3Rcblx0XHRfZXh0ZW5kKGN0eCwgb3B0cyk7XG5cdH1cblx0Ly8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuXHRpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlO1xuXHRpZiAoaXNVbmRlZmluZWQoY3R4LmRlcHRoKSkgY3R4LmRlcHRoID0gMjtcblx0aWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7XG5cdGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTtcblx0aWYgKGN0eC5jb2xvcnMpIGN0eC5zdHlsaXplID0gc3R5bGl6ZVdpdGhDb2xvcjtcblx0cmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpO1xufVxuXG4vLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FOU0lfZXNjYXBlX2NvZGUjZ3JhcGhpY3Ncbmluc3BlY3QuY29sb3JzID0ge1xuXHQnYm9sZCcgOiBbMSwgMjJdLFxuXHQnaXRhbGljJyA6IFszLCAyM10sXG5cdCd1bmRlcmxpbmUnIDogWzQsIDI0XSxcblx0J2ludmVyc2UnIDogWzcsIDI3XSxcblx0J3doaXRlJyA6IFszNywgMzldLFxuXHQnZ3JleScgOiBbOTAsIDM5XSxcblx0J2JsYWNrJyA6IFszMCwgMzldLFxuXHQnYmx1ZScgOiBbMzQsIDM5XSxcblx0J2N5YW4nIDogWzM2LCAzOV0sXG5cdCdncmVlbicgOiBbMzIsIDM5XSxcblx0J21hZ2VudGEnIDogWzM1LCAzOV0sXG5cdCdyZWQnIDogWzMxLCAzOV0sXG5cdCd5ZWxsb3cnIDogWzMzLCAzOV1cbn07XG5cbi8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZVxuaW5zcGVjdC5zdHlsZXMgPSB7XG5cdCdzcGVjaWFsJzogJ2N5YW4nLFxuXHQnbnVtYmVyJzogJ3llbGxvdycsXG5cdCdib29sZWFuJzogJ3llbGxvdycsXG5cdCd1bmRlZmluZWQnOiAnZ3JleScsXG5cdCdudWxsJzogJ2JvbGQnLFxuXHQnc3RyaW5nJzogJ2dyZWVuJyxcblx0J2RhdGUnOiAnbWFnZW50YScsXG5cdC8vIFwibmFtZVwiOiBpbnRlbnRpb25hbGx5IG5vdCBzdHlsaW5nXG5cdCdyZWdleHAnOiAncmVkJ1xufTtcblxuZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcblx0cmV0dXJuIHN0cjtcbn1cblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuXHRyZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcblx0cmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuXG5mdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG5cdHZhciBzdHlsZSA9IGluc3BlY3Quc3R5bGVzW3N0eWxlVHlwZV07XG5cblx0aWYgKHN0eWxlKSB7XG5cdFx0cmV0dXJuICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgK1xuXHRcdFx0XHRcdCAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdICsgJ20nO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBzdHI7XG5cdH1cbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcblx0cmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuXHRyZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuXHRyZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcblx0cmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaGFzT3duKG9iaiwgcHJvcCkge1xuXHRyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG5cdHJldHVybiBpc09iamVjdChyZSkgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG5cdHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuXHRyZXR1cm4gaXNPYmplY3QoZSkgJiZcblx0XHRcdChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xufVxuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuXHRyZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuXHRyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5mdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuXHR2YXIgaGFzaCA9IHt9O1xuXG5cdGZvckVhY2goYXJyYXksIGZ1bmN0aW9uKHZhbCwgaWR4KSB7XG5cdFx0aGFzaFt2YWxdID0gdHJ1ZTtcblx0fSk7XG5cblx0cmV0dXJuIGhhc2g7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcblx0dmFyIG91dHB1dCA9IFtdO1xuXHRmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuXHRcdGlmIChoYXNPd24odmFsdWUsIFN0cmluZyhpKSkpIHtcblx0XHRcdG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG5cdFx0XHRcdFx0U3RyaW5nKGkpLCB0cnVlKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG91dHB1dC5wdXNoKCcnKTtcblx0XHR9XG5cdH1cblx0Zm9yRWFjaChrZXlzLCBmdW5jdGlvbihrZXkpIHtcblx0XHRpZiAoIWtleS5tYXRjaCgvXlxcZCskLykpIHtcblx0XHRcdG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG5cdFx0XHRcdFx0a2V5LCB0cnVlKSk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIG91dHB1dDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcblx0cmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7XG5cdC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy5cblx0Ly8gQ2hlY2sgdGhhdCB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhbiBpbnNwZWN0IGZ1bmN0aW9uIG9uIGl0XG5cdGlmIChjdHguY3VzdG9tSW5zcGVjdCAmJlxuXHRcdFx0dmFsdWUgJiZcblx0XHRcdGlzRnVuY3Rpb24odmFsdWUuaW5zcGVjdCkgJiZcblx0XHRcdC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbFxuXHRcdFx0dmFsdWUuaW5zcGVjdCAhPT0gaW5zcGVjdCAmJlxuXHRcdFx0Ly8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG5cdFx0XHQhKHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSA9PT0gdmFsdWUpKSB7XG5cdFx0dmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzLCBjdHgpO1xuXHRcdGlmICghaXNTdHJpbmcocmV0KSkge1xuXHRcdFx0cmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7XG5cdFx0fVxuXHRcdHJldHVybiByZXQ7XG5cdH1cblxuXHQvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuXHR2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpO1xuXHRpZiAocHJpbWl0aXZlKSB7XG5cdFx0cmV0dXJuIHByaW1pdGl2ZTtcblx0fVxuXG5cdC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cblx0dmFyIGtleXMgPSBvYmplY3RLZXlzKHZhbHVlKTtcblx0dmFyIHZpc2libGVLZXlzID0gYXJyYXlUb0hhc2goa2V5cyk7XG5cblx0dHJ5IHtcblx0XHRpZiAoY3R4LnNob3dIaWRkZW4gJiYgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMpIHtcblx0XHRcdGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7XG5cdFx0fVxuXHR9IGNhdGNoIChlKSB7XG5cdFx0Ly8gaWdub3JlXG5cdH1cblxuXHQvLyBJRSBkb2Vzbid0IG1ha2UgZXJyb3IgZmllbGRzIG5vbi1lbnVtZXJhYmxlXG5cdC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4XG5cdGlmIChpc0Vycm9yKHZhbHVlKVxuXHRcdFx0JiYgKGluZGV4T2Yoa2V5cywgJ21lc3NhZ2UnKSA+PSAwIHx8IGluZGV4T2Yoa2V5cywgJ2Rlc2NyaXB0aW9uJykgPj0gMCkpIHtcblx0XHRyZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuXHR9XG5cblx0Ly8gU29tZSB0eXBlIG9mIG9iamVjdCB3aXRob3V0IHByb3BlcnRpZXMgY2FuIGJlIHNob3J0Y3V0dGVkLlxuXHRpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcblx0XHRpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcblx0XHRcdHZhciBuYW1lID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7XG5cdFx0XHRyZXR1cm4gY3R4LnN0eWxpemUoJ1tGdW5jdGlvbicgKyBuYW1lICsgJ10nLCAnc3BlY2lhbCcpO1xuXHRcdH1cblx0XHRpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG5cdFx0XHRyZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuXHRcdH1cblx0XHRpZiAoaXNEYXRlKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuIGN0eC5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAnZGF0ZScpO1xuXHRcdH1cblx0XHRpZiAoaXNFcnJvcih2YWx1ZSkpIHtcblx0XHRcdHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG5cdFx0fVxuXHR9XG5cblx0dmFyIGJhc2UgPSAnJywgYXJyYXkgPSBmYWxzZSwgYnJhY2VzID0gWyd7JywgJ30nXTtcblxuXHQvLyBNYWtlIEFycmF5IHNheSB0aGF0IHRoZXkgYXJlIEFycmF5XG5cdGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHRcdGFycmF5ID0gdHJ1ZTtcblx0XHRicmFjZXMgPSBbJ1snLCAnXSddO1xuXHR9XG5cblx0Ly8gTWFrZSBmdW5jdGlvbnMgc2F5IHRoYXQgdGhleSBhcmUgZnVuY3Rpb25zXG5cdGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuXHRcdHZhciBuID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7XG5cdFx0YmFzZSA9ICcgW0Z1bmN0aW9uJyArIG4gKyAnXSc7XG5cdH1cblxuXHQvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwc1xuXHRpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG5cdFx0YmFzZSA9ICcgJyArIFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5cdH1cblxuXHQvLyBNYWtlIGRhdGVzIHdpdGggcHJvcGVydGllcyBmaXJzdCBzYXkgdGhlIGRhdGVcblx0aWYgKGlzRGF0ZSh2YWx1ZSkpIHtcblx0XHRiYXNlID0gJyAnICsgRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbCh2YWx1ZSk7XG5cdH1cblxuXHQvLyBNYWtlIGVycm9yIHdpdGggbWVzc2FnZSBmaXJzdCBzYXkgdGhlIGVycm9yXG5cdGlmIChpc0Vycm9yKHZhbHVlKSkge1xuXHRcdGJhc2UgPSAnICcgKyBmb3JtYXRFcnJvcih2YWx1ZSk7XG5cdH1cblxuXHRpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHtcblx0XHRyZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArIGJyYWNlc1sxXTtcblx0fVxuXG5cdGlmIChyZWN1cnNlVGltZXMgPCAwKSB7XG5cdFx0aWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGN0eC5zdHlsaXplKCdbT2JqZWN0XScsICdzcGVjaWFsJyk7XG5cdFx0fVxuXHR9XG5cblx0Y3R4LnNlZW4ucHVzaCh2YWx1ZSk7XG5cblx0dmFyIG91dHB1dDtcblx0aWYgKGFycmF5KSB7XG5cdFx0b3V0cHV0ID0gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cyk7XG5cdH0gZWxzZSB7XG5cdFx0b3V0cHV0ID0gbWFwKGtleXMsIGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0cmV0dXJuIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpO1xuXHRcdH0pO1xuXHR9XG5cblx0Y3R4LnNlZW4ucG9wKCk7XG5cblx0cmV0dXJuIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuXHR2YXIgbmFtZSwgc3RyLCBkZXNjO1xuXHRkZXNjID0geyB2YWx1ZTogdm9pZCAwIH07XG5cdHRyeSB7XG5cdFx0Ly8gaWU2IOKAuiBuYXZpZ2F0b3IudG9TdHJpbmdcblx0XHQvLyB0aHJvd3MgRXJyb3I6IE9iamVjdCBkb2Vzbid0IHN1cHBvcnQgdGhpcyBwcm9wZXJ0eSBvciBtZXRob2Rcblx0XHRkZXNjLnZhbHVlID0gdmFsdWVba2V5XTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdC8vIGlnbm9yZVxuXHR9XG5cdHRyeSB7XG5cdFx0Ly8gaWUxMCDigLogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cubG9jYXRpb24sICdoYXNoJylcblx0XHQvLyB0aHJvd3MgVHlwZUVycm9yOiBPYmplY3QgZG9lc24ndCBzdXBwb3J0IHRoaXMgYWN0aW9uXG5cdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpIHtcblx0XHRcdGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpIHx8IGRlc2M7XG5cdFx0fVxuXHR9IGNhdGNoIChlKSB7XG5cdFx0Ly8gaWdub3JlXG5cdH1cblx0aWYgKGRlc2MuZ2V0KSB7XG5cdFx0aWYgKGRlc2Muc2V0KSB7XG5cdFx0XHRzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlci9TZXR0ZXJdJywgJ3NwZWNpYWwnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXJdJywgJ3NwZWNpYWwnKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0aWYgKGRlc2Muc2V0KSB7XG5cdFx0XHRzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuXHRcdH1cblx0fVxuXHRpZiAoIWhhc093bih2aXNpYmxlS2V5cywga2V5KSkge1xuXHRcdG5hbWUgPSAnWycgKyBrZXkgKyAnXSc7XG5cdH1cblx0aWYgKCFzdHIpIHtcblx0XHRpZiAoaW5kZXhPZihjdHguc2VlbiwgZGVzYy52YWx1ZSkgPCAwKSB7XG5cdFx0XHRpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHtcblx0XHRcdFx0c3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcblx0XHRcdFx0aWYgKGFycmF5KSB7XG5cdFx0XHRcdFx0c3RyID0gbWFwKHN0ci5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uKGxpbmUpIHtcblx0XHRcdFx0XHRcdHJldHVybiAnICAnICsgbGluZTtcblx0XHRcdFx0XHR9KS5qb2luKCdcXG4nKS5zdWJzdHIoMik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3RyID0gJ1xcbicgKyBtYXAoc3RyLnNwbGl0KCdcXG4nKSwgZnVuY3Rpb24obGluZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICcgICAnICsgbGluZTtcblx0XHRcdFx0XHR9KS5qb2luKCdcXG4nKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7XG5cdFx0fVxuXHR9XG5cdGlmIChpc1VuZGVmaW5lZChuYW1lKSkge1xuXHRcdGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG5cdFx0XHRyZXR1cm4gc3RyO1xuXHRcdH1cblx0XHRuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuXHRcdGlmIChuYW1lLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKSkge1xuXHRcdFx0bmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG5cdFx0XHRuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG5cdFx0XHRcdFx0XHRcdFx0IC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcblx0XHRcdFx0XHRcdFx0XHQgLnJlcGxhY2UoLyheXCJ8XCIkKS9nLCBcIidcIik7XG5cdFx0XHRuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcbn1cblxuZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcblx0aWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcblx0XHRyZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcblx0aWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuXHRcdHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuXHRcdHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcblx0fVxuXHRpZiAoaXNOdW1iZXIodmFsdWUpKVxuXHRcdHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG5cdGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuXHRcdHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuXHQvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgXCJvYmplY3RcIiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuXG5cdGlmIChpc051bGwodmFsdWUpKVxuXHRcdHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7XG59XG5cbmZ1bmN0aW9uIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKSB7XG5cdHZhciBudW1MaW5lc0VzdCA9IDA7XG5cdHZhciBsZW5ndGggPSByZWR1Y2Uob3V0cHV0LCBmdW5jdGlvbihwcmV2LCBjdXIpIHtcblx0XHRudW1MaW5lc0VzdCsrO1xuXHRcdGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcblx0XHRyZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZywgJycpLmxlbmd0aCArIDE7XG5cdH0sIDApO1xuXG5cdGlmIChsZW5ndGggPiA2MCkge1xuXHRcdHJldHVybiBicmFjZXNbMF0gK1xuXHRcdFx0XHRcdCAoYmFzZSA9PT0gJycgPyAnJyA6IGJhc2UgKyAnXFxuICcpICtcblx0XHRcdFx0XHQgJyAnICtcblx0XHRcdFx0XHQgb3V0cHV0LmpvaW4oJyxcXG4gICcpICtcblx0XHRcdFx0XHQgJyAnICtcblx0XHRcdFx0XHQgYnJhY2VzWzFdO1xuXHR9XG5cblx0cmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcbn1cblxuZnVuY3Rpb24gX2V4dGVuZChvcmlnaW4sIGFkZCkge1xuXHQvLyBEb24ndCBkbyBhbnl0aGluZyBpZiBhZGQgaXNuJ3QgYW4gb2JqZWN0XG5cdGlmICghYWRkIHx8ICFpc09iamVjdChhZGQpKSByZXR1cm4gb3JpZ2luO1xuXG5cdHZhciBrZXlzID0gb2JqZWN0S2V5cyhhZGQpO1xuXHR2YXIgaSA9IGtleXMubGVuZ3RoO1xuXHR3aGlsZSAoaS0tKSB7XG5cdFx0b3JpZ2luW2tleXNbaV1dID0gYWRkW2tleXNbaV1dO1xuXHR9XG5cdHJldHVybiBvcmlnaW47XG59XG4iXSwic291cmNlUm9vdCI6Ii9zcmMifQ==