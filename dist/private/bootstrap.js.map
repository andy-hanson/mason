{"version":3,"sources":["private/bootstrap.js"],"names":[],"mappings":"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","file":"private/bootstrap.js","sourcesContent":["const pAdd = (object, key, value) =>\n\tObject.defineProperty(object, key, {\n\t\tvalue,\n\t\tenumerable: true,\n\t\t// TODO:ES6 `writable` shouldn't need to be explicit\n\t\twritable: false\n\t})\n\n// region Builtin Funs for use by the compiler\n// This object contains functions called upon by compiled code.\nconst ms = exports.ms = {}\npAdd(global, '_ms', ms)\n\nconst msDef = exports.msDef = (name, fun) =>\n\tpAdd(ms, name, fun)\nconst msDefTemp = (name, fun) =>\n\tms[name] = fun\nexports.msCall = (name, ...args) =>\n\tms[name](...args)\n\n\nconst msDefs = {\n\tlazyGetModule(module) {\n\t\tif (module === undefined)\n\t\t\tthrow new Error('Module undefined.')\n\t\treturn module._get instanceof Lazy ? module._get : ms.lazy(() => module)\n\t},\n\n\tgetModule(module) {\n\t\tif (module === undefined)\n\t\t\tthrow new Error('Module undefined.')\n\t\treturn module._get instanceof Lazy ? module._get.get() : module\n\t},\n\n\tgetDefaultExport: module => {\n\t\tif (module === undefined)\n\t\t\tthrow new Error('Module undefined.')\n\t\tconst mod = ms.getModule(module)\n\t\treturn mod.default === undefined ? mod : mod.default\n\t},\n\n\tlazyProp(lazyObject, key) {\n\t\tif (!(lazyObject instanceof Lazy))\n\t\t\tthrow new Error(`Expected a Lazy, got: ${lazyObject}`)\n\t\treturn ms.lazy(() => lazyObject.get()[key])\n\t},\n\n\tget(object, key) {\n\t\tconst _ = object[key]\n\t\tif (_ === undefined)\n\t\t\tthrow new Error(`Module ${object.displayName} does not have ${key}`)\n\t\treturn _\n\t},\n\n\tbool(b) {\n\t\tif (typeof b !== 'boolean')\n\t\t\tthrow new Error(`Expected Bool, got ${b}`)\n\t\treturn b\n\t},\n\n\t// Used for splat calls.\n\t// TODO:ES6 Shouldn't need fun(...arg) should work for any iterable.\n\tarr(a) {\n\t\tif (a instanceof Array)\n\t\t\treturn a\n\t\tconst out = []\n\t\tfor (let em of ms.iterator(a))\n\t\t\tout.push(em)\n\t\treturn out\n\t},\n\n\t// For use by Obj-Type.ms generated code.\n\tcheckNoExtras(_this, _, rtName) {\n\t\t// If there was some key in `_` that we didn't copy:\n\t\tif (Object.keys(_).length > Object.keys(_this).length)\n\t\t\tObject.getOwnPropertyNames(_).forEach(function(name) {\n\t\t\t\tif (name !== 'displayName')\n\t\t\t\t\tif (!Object.prototype.hasOwnProperty.call(_this, name))\n\t\t\t\t\t\tthrow new Error('Extra prop ' + name + ' for ' + rtName)\n\t\t\t})\n\t},\n\n\tlazy: _ => new Lazy(_),\n\tunlazy: _ => _ instanceof Lazy ? _.get() : _,\n\n\tset(_, k0, v0, k1, v1, k2, v2, k3) {\n\t\t_[k0] = v0\n\t\tif (k1 === undefined)\n\t\t\treturn _\n\t\t_[k1] = v1\n\t\tif (k2 === undefined)\n\t\t\treturn _\n\t\t_[k2] = v2\n\t\tif (k3 === undefined)\n\t\t\treturn _\n\t\tfor (let i = 7; i < arguments.length; i = i + 2)\n\t\t\t_[arguments[i]] = arguments[i + 1]\n\t\treturn _\n\t},\n\n\tlset(_, k0, v0, k1, v1, k2, v2, k3) {\n\t\tsetOrLazy(_, k0, v0)\n\t\tif (k1 === undefined)\n\t\t\treturn _\n\t\tsetOrLazy(_, k1, v1)\n\t\tif (k2 === undefined)\n\t\t\treturn _\n\t\tsetOrLazy(_, k2, v2)\n\t\tif (k3 === undefined)\n\t\t\treturn _\n\t\tfor (let i = 7; i < arguments.length; i = i + 2)\n\t\t\tsetOrLazy(_, arguments[i], arguments[i + 1])\n\t\treturn _\n\t}\n}\nObject.keys(msDefs).forEach(key => msDef(key, msDefs[key]))\n\nconst setOrLazy = (_, k, v) => {\n\tif (v instanceof Lazy)\n\t\tObject.setProperty(_, k, { get: function() { return ms.unlazy(v) } })\n\telse\n\t\tpAdd(_, k, v)\n}\n\nfunction Lazy(get) {\n\tthis.get = () => {\n\t\tthis.get = () => {\n\t\t\tthrow new Error(`Lazy value depends on itself. Thunk: ${get}`)\n\t\t}\n\t\tconst _ = get()\n\t\tthis.get = () => _\n\t\treturn _\n\t}\n}\n\n// Overwritten by show.ms\nmsDefTemp('show', _ => {\n\tif (typeof _ !== 'string' && typeof _ !== 'number')\n\t\tthrow new Error(\n\t\t\t'Should only be using Strs or Nums here until this is defined for real in show.ms.')\n\treturn _.toString()\n})\n\n// region Funs used by bootstrapping code\nexports.Fun = Function\nexports.Obj = Object\nexports.Str = String\nexports['p+!'] = pAdd\n\n// region Contains\n// Some Types want to implement contains? before it is officially defined.\nconst containsImplSymbol = exports['contains?-impl-symbol'] = 'impl-contains?'\nexports['impl-contains?!'] = function(type, impl) {\n\tObject.defineProperty(type.prototype, exports['contains?-impl-symbol'], {\n\t\tvalue: impl,\n\t\tenumerable: false\n\t})\n}\n\n// Overwritten by Type/index.ms to actually do type checking.\nmsDefTemp('checkContains', (type, val) => val)\n\nObject[containsImplSymbol] = function(ignore, _) {\n\tif (_ == null)\n\t\treturn false\n\tswitch (typeof _) {\n\t\tcase 'boolean':\n\t\tcase 'undefined':\n\t\tcase 'number':\n\t\tcase 'string':\n\t\tcase 'symbol':\n\t\t\treturn false\n\t\tdefault:\n\t\t\treturn true\n\t}\n};\n\n// An object is a Function if its typeof is `function`.\n// This helps us catch any callabe Obj-Type.\n// TODO: Separate Fun from Callable\n// Since these are primitives, we can't use `instanceof`.\n[ Function, Boolean, String, Symbol, Number ].forEach(function(type) {\n\tconst typeOf = type.name.toLowerCase()\n\ttype[containsImplSymbol] = function(ignore, _) {\n\t\treturn typeof _ === typeOf\n\t}\n})\n"],"sourceRoot":"/src"}