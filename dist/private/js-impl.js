if (typeof define !== 'function') var define = require('amdefine')(module);define(['exports'], function (exports) {
	'use strict';

	Object.defineProperty(exports, '__esModule', {
		value: true
	});
	var _ms2 = _ms;
	const bool = _ms2.bool;
	const unlazy = _ms2.unlazy;
	const
	// js.ms
	iNew = function (ctr, a, b, c) {
		// TODO:ES6 return new ctr(...args)
		switch (arguments.length) {
			case 0:
				throw new Error('`new` needs a constructor.');
			case 1:
				return new ctr();
			case 2:
				return new ctr(a);
			case 3:
				return new ctr(a, b);
			case 4:
				return new ctr(a, b, c);
			default:
				throw new Error('This many arguments not supported.');
		}
	},
	     

	// Boolean.ms
	// TODO:ES6 ...args
	iAnd = function () {
		const args = arguments;
		switch (args.length) {
			case 0:
				return true;
			case 1:
				return bool(args[0]);
			case 2:
				return bool(args[0]) && bool(unlazy(args[1]));
			case 3:
				return bool(args[0]) && bool(unlazy(args[1])) && bool(unlazy(args[2]));
			default:
				if (!bool(args[0])) return false;
				for (let i = 1; i < args.length; i = i + 1) if (!bool(unlazy(args[i]))) return false;
				return true;
		}
	},
	     
	// TODO:ES6 (...args) => {
	iOr = function () {
		const args = arguments;
		switch (args.length) {
			case 0:
				return false;
			case 1:
				return bool(args[0]);
			case 2:
				return bool(args[0]) || bool(unlazy(args[1]));
			case 3:
				return bool(args[0]) || bool(unlazy(args[1])) || bool(unlazy(args[2]));
			default:
				if (bool(args[0])) return true;
				for (let i = 1; i < args.length; i = i + 1) if (bool(unlazy(args[i]))) return true;
				return true;
		}
	},
	     

	// Kind.ms
	KindContains = function (kind, _) {
		return _ != null && _[kind['symbol-for-isa']] !== undefined;
	},
	      isEmpty = function (array) {
		return array.length === 0;
	},
	     

	// Generator.ms
	eachGenerator = function* (iter, doEach) {
		for (let em of iter) yield* doEach(em);
	},
	     

	// Try.ms
	ohNo = function (error) {
		throw makeError(error);
	},
	      alwaysDoAfter = function (tried, finallyDo) {
		try {
			return tried();
		} finally {
			finallyDo();
		}
	},
	      iTry = function (Success, tried) {
		try {
			return Success(tried());
		} catch (e) {
			return e;
		}
	},
	      makeError = function (error) {
		let err;
		try {
			err = _ms.unlazy(error);
		} catch (e) {
			// TODO: return new Error ('Error making error: ' + e.message)
			return makeError(e);
		}
		if (err instanceof Error) return err;else if (typeof err === 'string') return new Error(err);else if (err === undefined) return new Error('Oh no!');else throw new Error('Argument to `oh-no!` must be Error or String');
	},
	     

	// Array.ms
	// TODO:ES6 Shouldn't need this.
	arrayIterator = function* (_) {
		for (let i = 0; i < _.length; i = i + 1) yield _[i];
	},
	     

	// show.ms
	newSet = function () {
		return new Set();
	},
	     

	// Hash-Map.ms
	makeMap = function (hm, assoc, args) {
		let i = 0;
		while (i < args.length) {
			const key = args[i];
			i = i + 1;
			const val = args[i];
			i = i + 1;
			assoc(hm, key, val);
		}
	},
	     

	// Obj-Type.ms and Method.ms and Wrap-Type.ms
	buildStr = function (builder) {
		let s = '';
		builder(function (str) {
			s = s + str + '\n';
		});
		return s;
	},
	     
	// Obj-Type.ms
	addOne = function (_) {
		return _ + 1;
	},
	     

	// perf-test.ms
	timeStar = function (times, timeMe) {
		let i = times;
		const out = [];
		while (i > 0) {
			i = i - 1;
			out.push(timeMe(i));
		}
		return out;
	},
	     

	// Function.ms
	// TODO:ES6 (f, ...args) => Function.prototype.bind.call(f, null, ...args)
	iCurry = function (f) {
		return Function.prototype.bind.apply(f, arguments);
	},
	     

	// Method.js
	// TODO: Should be doable in Mason...
	methodArgNames = function (nArgs) {
		const res = [];
		const a = 'a'.charCodeAt(0);
		for (let i = 0; i < nArgs; i = i + 1) res.push(String.fromCharCode(a + i));
		return res.join(',');
	};
	exports.iNew = iNew;
	exports.iAnd = iAnd;
	exports.iOr = iOr;
	exports.KindContains = KindContains;
	exports.isEmpty = isEmpty;
	exports.eachGenerator = eachGenerator;
	exports.ohNo = ohNo;
	exports.alwaysDoAfter = alwaysDoAfter;
	exports.iTry = iTry;
	exports.makeError = makeError;
	exports.arrayIterator = arrayIterator;
	exports.newSet = newSet;
	exports.makeMap = makeMap;
	exports.buildStr = buildStr;
	exports.addOne = addOne;
	exports.timeStar = timeStar;
	exports.iCurry = iCurry;
	exports.methodArgNames = methodArgNames;
});
//# sourceMappingURL=data:application/json;base64,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QTtBQUMzQixPQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUNuQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDckMsU0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0VBQ3BCLENBQUE7U0FySkQsSUFBSSxHQUFKLElBQUk7U0FjSixJQUFJLEdBQUosSUFBSTtTQWlCSixHQUFHLEdBQUgsR0FBRztTQWtCSCxZQUFZLEdBQVosWUFBWTtTQUVaLE9BQU8sR0FBUCxPQUFPO1NBR1AsYUFBYSxHQUFiLGFBQWE7U0FNYixJQUFJLEdBQUosSUFBSTtTQUNKLGFBQWEsR0FBYixhQUFhO1NBT2IsSUFBSSxHQUFKLElBQUk7U0FPSixTQUFTLEdBQVQsU0FBUztTQW9CVCxhQUFhLEdBQWIsYUFBYTtTQU1iLE1BQU0sR0FBTixNQUFNO1NBR04sT0FBTyxHQUFQLE9BQU87U0FZUCxRQUFRLEdBQVIsUUFBUTtTQU1SLE1BQU0sR0FBTixNQUFNO1NBR04sUUFBUSxHQUFSLFFBQVE7U0FZUixNQUFNLEdBQU4sTUFBTTtTQU1OLGNBQWMsR0FBZCxjQUFjIiwiZmlsZSI6InByaXZhdGUvanMtaW1wbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgYm9vbCwgdW5sYXp5IH0gPSBfbXNcblxuZXhwb3J0XHRjb25zdFxuXHQvLyBqcy5tc1xuXHRpTmV3ID0gZnVuY3Rpb24oY3RyLCBhLCBiLCBjKSB7XG5cdFx0Ly8gVE9ETzpFUzYgcmV0dXJuIG5ldyBjdHIoLi4uYXJncylcblx0XHRzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcblx0XHRcdGNhc2UgMDogdGhyb3cgbmV3IEVycm9yKCdgbmV3YCBuZWVkcyBhIGNvbnN0cnVjdG9yLicpXG5cdFx0XHRjYXNlIDE6IHJldHVybiBuZXcgY3RyKClcblx0XHRcdGNhc2UgMjogcmV0dXJuIG5ldyBjdHIoYSlcblx0XHRcdGNhc2UgMzogcmV0dXJuIG5ldyBjdHIoYSwgYilcblx0XHRcdGNhc2UgNDogcmV0dXJuIG5ldyBjdHIoYSwgYiwgYylcblx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcignVGhpcyBtYW55IGFyZ3VtZW50cyBub3Qgc3VwcG9ydGVkLicpXG5cdFx0fVxuXHR9LFxuXG5cdC8vIEJvb2xlYW4ubXNcblx0Ly8gVE9ETzpFUzYgLi4uYXJnc1xuXHRpQW5kID0gZnVuY3Rpb24oKSB7XG5cdFx0Y29uc3QgYXJncyA9IGFyZ3VtZW50c1xuXHRcdHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcblx0XHRcdGNhc2UgMDogcmV0dXJuIHRydWVcblx0XHRcdGNhc2UgMTogcmV0dXJuIGJvb2woYXJnc1swXSlcblx0XHRcdGNhc2UgMjogcmV0dXJuIGJvb2woYXJnc1swXSkgJiYgYm9vbCh1bmxhenkoYXJnc1sxXSkpXG5cdFx0XHRjYXNlIDM6IHJldHVybiBib29sKGFyZ3NbMF0pICYmIGJvb2wodW5sYXp5KGFyZ3NbMV0pKSAmJiBib29sKHVubGF6eShhcmdzWzJdKSlcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGlmICghYm9vbChhcmdzWzBdKSlcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCBhcmdzLmxlbmd0aDsgaSA9IGkgKyAxKVxuXHRcdFx0XHRcdGlmICghYm9vbCh1bmxhenkoYXJnc1tpXSkpKVxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHRcdHJldHVybiB0cnVlXG5cdFx0fVxuXHR9LFxuXHQvLyBUT0RPOkVTNiAoLi4uYXJncykgPT4ge1xuXHRpT3IgPSBmdW5jdGlvbigpIHtcblx0XHRjb25zdCBhcmdzID0gYXJndW1lbnRzXG5cdFx0c3dpdGNoIChhcmdzLmxlbmd0aCkge1xuXHRcdFx0Y2FzZSAwOiByZXR1cm4gZmFsc2Vcblx0XHRcdGNhc2UgMTogcmV0dXJuIGJvb2woYXJnc1swXSlcblx0XHRcdGNhc2UgMjogcmV0dXJuIGJvb2woYXJnc1swXSkgfHwgYm9vbCh1bmxhenkoYXJnc1sxXSkpXG5cdFx0XHRjYXNlIDM6IHJldHVybiBib29sKGFyZ3NbMF0pIHx8IGJvb2wodW5sYXp5KGFyZ3NbMV0pKSB8fCBib29sKHVubGF6eShhcmdzWzJdKSlcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGlmIChib29sKGFyZ3NbMF0pKVxuXHRcdFx0XHRcdHJldHVybiB0cnVlXG5cdFx0XHRcdGZvciAobGV0IGkgPSAxOyBpIDwgYXJncy5sZW5ndGg7IGkgPSBpICsgMSlcblx0XHRcdFx0XHRpZiAoYm9vbCh1bmxhenkoYXJnc1tpXSkpKVxuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWVcblx0XHRcdFx0cmV0dXJuIHRydWVcblx0XHR9XG5cdH0sXG5cblx0Ly8gS2luZC5tc1xuXHRLaW5kQ29udGFpbnMgPSAoa2luZCwgXykgPT5cblx0XHRfICE9IG51bGwgJiYgX1traW5kWydzeW1ib2wtZm9yLWlzYSddXSAhPT0gdW5kZWZpbmVkLFxuXHRpc0VtcHR5ID0gYXJyYXkgPT4gYXJyYXkubGVuZ3RoID09PSAwLFxuXG5cdC8vIEdlbmVyYXRvci5tc1xuXHRlYWNoR2VuZXJhdG9yID0gZnVuY3Rpb24qKGl0ZXIsIGRvRWFjaCkge1xuXHRcdGZvciAobGV0IGVtIG9mIGl0ZXIpXG5cdFx0XHR5aWVsZCogZG9FYWNoKGVtKVxuXHR9LFxuXG5cdC8vIFRyeS5tc1xuXHRvaE5vID0gZXJyb3IgPT4geyB0aHJvdyBtYWtlRXJyb3IoZXJyb3IpIH0sXG5cdGFsd2F5c0RvQWZ0ZXIgPSAodHJpZWQsIGZpbmFsbHlEbykgPT4ge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gdHJpZWQoKVxuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRmaW5hbGx5RG8oKVxuXHRcdH1cblx0fSxcblx0aVRyeSA9IChTdWNjZXNzLCB0cmllZCkgPT4ge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gU3VjY2Vzcyh0cmllZCgpKVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHJldHVybiBlXG5cdFx0fVxuXHR9LFxuXHRtYWtlRXJyb3IgPSBlcnJvciA9PiB7XG5cdFx0bGV0IGVyclxuXHRcdHRyeSB7XG5cdFx0XHRlcnIgPSBfbXMudW5sYXp5KGVycm9yKVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdC8vIFRPRE86IHJldHVybiBuZXcgRXJyb3IgKCdFcnJvciBtYWtpbmcgZXJyb3I6ICcgKyBlLm1lc3NhZ2UpXG5cdFx0XHRyZXR1cm4gbWFrZUVycm9yKGUpXG5cdFx0fVxuXHRcdGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcilcblx0XHRcdHJldHVybiBlcnJcblx0XHRlbHNlIGlmICh0eXBlb2YgZXJyID09PSAnc3RyaW5nJylcblx0XHRcdHJldHVybiBuZXcgRXJyb3IoZXJyKVxuXHRcdGVsc2UgaWYgKGVyciA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0cmV0dXJuIG5ldyBFcnJvcignT2ggbm8hJylcblx0XHRlbHNlXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0FyZ3VtZW50IHRvIGBvaC1ubyFgIG11c3QgYmUgRXJyb3Igb3IgU3RyaW5nJylcblx0fSxcblxuXHQvLyBBcnJheS5tc1xuXHQvLyBUT0RPOkVTNiBTaG91bGRuJ3QgbmVlZCB0aGlzLlxuXHRhcnJheUl0ZXJhdG9yID0gZnVuY3Rpb24qKF8pIHtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IF8ubGVuZ3RoOyBpID0gaSArIDEpXG5cdFx0XHR5aWVsZCBfW2ldXG5cdH0sXG5cblx0Ly8gc2hvdy5tc1xuXHRuZXdTZXQgPSAoKSA9PiBuZXcgU2V0KCksXG5cblx0Ly8gSGFzaC1NYXAubXNcblx0bWFrZU1hcCA9IChobSwgYXNzb2MsIGFyZ3MpID0+IHtcblx0XHRsZXQgaSA9IDBcblx0XHR3aGlsZSAoaSA8IGFyZ3MubGVuZ3RoKSB7XG5cdFx0XHRjb25zdCBrZXkgPSBhcmdzW2ldXG5cdFx0XHRpID0gaSArIDFcblx0XHRcdGNvbnN0IHZhbCA9IGFyZ3NbaV1cblx0XHRcdGkgPSBpICsgMVxuXHRcdFx0YXNzb2MoaG0sIGtleSwgdmFsKVxuXHRcdH1cblx0fSxcblxuXHQvLyBPYmotVHlwZS5tcyBhbmQgTWV0aG9kLm1zIGFuZCBXcmFwLVR5cGUubXNcblx0YnVpbGRTdHIgPSBidWlsZGVyID0+IHtcblx0XHRsZXQgcyA9ICcnXG5cdFx0YnVpbGRlcihzdHIgPT4geyBzID0gcyArIHN0ciArICdcXG4nIH0pXG5cdFx0cmV0dXJuIHNcblx0fSxcblx0Ly8gT2JqLVR5cGUubXNcblx0YWRkT25lID0gXyA9PiBfICsgMSxcblxuXHQvLyBwZXJmLXRlc3QubXNcblx0dGltZVN0YXIgPSAodGltZXMsIHRpbWVNZSkgPT4ge1xuXHRcdGxldCBpID0gdGltZXNcblx0XHRjb25zdCBvdXQgPSBbXVxuXHRcdHdoaWxlIChpID4gMCkge1xuXHRcdFx0aSA9IGkgLSAxXG5cdFx0XHRvdXQucHVzaCh0aW1lTWUoaSkpXG5cdFx0fVxuXHRcdHJldHVybiBvdXRcblx0fSxcblxuXHQvLyBGdW5jdGlvbi5tc1xuXHQvLyBUT0RPOkVTNiAoZiwgLi4uYXJncykgPT4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChmLCBudWxsLCAuLi5hcmdzKVxuXHRpQ3VycnkgPSBmdW5jdGlvbihmKSB7XG5cdFx0cmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KGYsIGFyZ3VtZW50cylcblx0fSxcblxuXHQvLyBNZXRob2QuanNcblx0Ly8gVE9ETzogU2hvdWxkIGJlIGRvYWJsZSBpbiBNYXNvbi4uLlxuXHRtZXRob2RBcmdOYW1lcyA9IG5BcmdzID0+IHtcblx0XHRjb25zdCByZXMgPSBbIF1cblx0XHRjb25zdCBhID0gJ2EnLmNoYXJDb2RlQXQoMClcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5BcmdzOyBpID0gaSArIDEpXG5cdFx0XHRyZXMucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGEgKyBpKSlcblx0XHRyZXR1cm4gcmVzLmpvaW4oJywnKVxuXHR9XG4iXSwic291cmNlUm9vdCI6Ii9zcmMifQ==